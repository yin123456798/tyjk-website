<html lang="zh-CN">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>
   天涯极客社团 - 招新页面
  </title>
  <script src="https://res.gemcoder.com/js/reload.js">
  </script>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
  <script src="https://cdn.bootcdn.net/ajax/libs/echarts/5.4.3/echarts.min.js">
  </script>
  <!-- Supabase集成 -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script src="supabase-config.js"></script>
  <!-- 文件上传功能 -->
  <script src="file-upload.js"></script>
  <script>
   tailwind.config = {
  theme: {
    extend: {
      colors: {
        primary: '#165DFF',
        secondary: '#36BFFA',
        accent: '#722ED1',
        dark: '#1D2129',
        light: '#F2F3F5'
      },
      fontFamily: {
        sans: ['Inter', 'system-ui', 'sans-serif']
      }
    }
  }
};
  </script>
  <style type="text/tailwindcss">
   @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .transition-custom {
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }
            .card-hover {
                @apply hover:shadow-xl hover:-translate-y-1 transition-all duration-300;
            }
            .certificate-item {
                min-height: 400px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .certificate-image {
                max-width: 100%;
                max-height: 100%;
                object-fit: contain;
                transition: transform 0.5s ease;
            }
            .certificate-image:hover {
                transform: scale(1.1);
            }
            
            /* 项目图片样式优化 */
            .project-card img {
                transition: all 0.3s ease;
            }
            
            .project-card:hover img {
                transform: scale(1.05);
            }
            
            /* 图片容器样式 */
            .project-image-container {
                background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
                display: flex;
                align-items: center;
                justify-content: center;
                height: 224px; /* 固定高度，确保所有卡片一致 */
                overflow: hidden;
                position: relative;
            }
            
            /* 确保图片不会裁剪，并保持比例 */
            .project-image-fit {
                width: 100%;
                height: 100%;
                object-fit: cover; /* 使用cover确保图片填满容器 */
                object-position: center; /* 居中显示图片 */
                transition: transform 0.3s ease;
            }
            
            /* 图片悬停效果 */
            .project-card:hover .project-image-fit {
                transform: scale(1.05);
            }
            
            /* 确保所有项目卡片高度一致 */
            .project-card {
                height: auto;
                min-height: 400px; /* 设置最小高度确保一致性 */
                display: flex;
                flex-direction: column;
            }
            
            .project-card .project-image-container {
                flex-shrink: 0; /* 图片容器不收缩 */
            }
            
            .project-card > div:last-child {
                flex: 1; /* 内容区域占满剩余空间 */
                display: flex;
                flex-direction: column;
                justify-content: space-between;
            }
            
            /* 行数限制样式 */
            .line-clamp-1 {
                display: -webkit-box;
                -webkit-line-clamp: 1;
                -webkit-box-orient: vertical;
                overflow: hidden;
            }
            
            .line-clamp-2 {
                display: -webkit-box;
                -webkit-line-clamp: 2;
                -webkit-box-orient: vertical;
                overflow: hidden;
            }
            
            /* 模态窗口动画 */
            #all-projects-modal {
                animation: fadeIn 0.3s ease-out;
            }
            
            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: scale(0.9);
                }
                to {
                    opacity: 1;
                    transform: scale(1);
                }
            }
        }
  </style>
 </head>
 <body class="bg-gray-50 font-sans text-dark">
  <!-- 导航栏 -->
  <header class="fixed w-full bg-white/90 backdrop-blur-sm z-50 transition-all duration-300 shadow-sm" id="navbar">
   <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16 md:h-20">
     <div class="flex items-center">
      <a class="flex items-center" href="javascript:void(0);">
       <i class="fas fa-code text-primary text-2xl mr-2">
       </i>
       <span class="text-xl font-bold text-primary">
        天涯极客社团
       </span>
      </a>
     </div>
     <!-- 桌面导航 -->
     <nav class="hidden md:flex items-center space-x-8">
      <a class="text-gray-700 hover:text-primary font-medium transition-colors" href="#home">
       首页
      </a>
      <a class="text-gray-700 hover:text-primary font-medium transition-colors" href="#about">
       关于我们
      </a>
      <a class="text-gray-700 hover:text-primary font-medium transition-colors" href="#achievements">
       成就展示
      </a>
      <a class="text-gray-700 hover:text-primary font-medium transition-colors" href="#projects">
       项目作品
      </a>
      <a class="text-gray-700 hover:text-primary font-medium transition-colors" href="#team">
       团队风采
      </a>
      <a class="text-gray-700 hover:text-primary font-medium transition-colors" href="#join">
       加入我们
      </a>
     </nav>
     
     <!-- 用户操作区域 -->
     <div class="hidden md:flex items-center space-x-4">
      <!-- 用户操作按钮 -->
      <div class="flex items-center space-x-3" id="user-actions">
       <button class="text-gray-700 hover:text-primary font-medium transition-colors" onclick="showLoginModal()">
        登录
       </button>
       <button class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg transition-colors" onclick="showRegisterModal()">
        注册
       </button>
      </div>
      <!-- 用户信息（登录后显示） -->
      <div class="flex items-center space-x-3 hidden" id="user-info">
       <span class="text-gray-700 font-medium" id="user-name">用户名</span>
       <a href="profile.html" class="text-gray-700 hover:text-blue-600 font-medium transition-colors">
        个人中心
       </a>
       <button class="text-gray-700 hover:text-purple-600 font-medium transition-colors relative" onclick="showProjectManagement()" id="project-management-btn">
        项目管理
         <span id="project-notification-dot" class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full hidden"></span>
       </button>
       <a href="admin.html" class="text-gray-700 hover:text-green-600 font-medium transition-colors hidden" id="admin-link">
        管理后台
       </a>
       <button class="text-gray-700 hover:text-red-600 font-medium transition-colors" onclick="handleLogout()">
        退出
       </button>
      </div>
     </div>
     <!-- 移动端菜单按钮 -->
     <div class="md:hidden">
      <button class="text-gray-700 hover:text-primary focus:outline-none" id="menu-toggle">
       <i class="fas fa-bars text-xl">
       </i>
      </button>
     </div>
    </div>
   </div>
   <!-- 移动端导航菜单 -->
   <div class="hidden md:hidden bg-white border-t" id="mobile-menu">
    <div class="container mx-auto px-4 py-3 space-y-3">
     <a class="block py-2 text-gray-700 hover:text-primary font-medium" href="#home">
      首页
     </a>
     <a class="block py-2 text-gray-700 hover:text-primary font-medium" href="#about">
      关于我们
     </a>
     <a class="block py-2 text-gray-700 hover:text-primary font-medium" href="#achievements">
      成就展示
     </a>
     <a class="block py-2 text-gray-700 hover:text-primary font-medium" href="#projects">
      项目作品
     </a>
     <a class="block py-2 text-gray-700 hover:text-primary font-medium" href="#team">
      团队风采
     </a>
     <a class="block py-2 text-gray-700 hover:text-primary font-medium" href="#join">
      加入我们
     </a>
     <!-- 移动端用户操作 -->
     <div class="border-t pt-3 mt-3">
      <div class="flex flex-col space-y-2" id="mobile-user-actions">
       <button class="block w-full text-left py-2 text-gray-700 hover:text-primary font-medium" onclick="showLoginModal()">
        登录
       </button>
       <button class="block w-full text-center py-2 bg-primary text-white rounded-lg font-medium" onclick="showRegisterModal()">
        注册
       </button>
      </div>
      <div class="flex flex-col space-y-2 hidden" id="mobile-user-info">
       <span class="block py-2 text-gray-700 font-medium" id="mobile-user-name">用户名</span>
       <a href="profile.html" class="block w-full text-left py-2 text-gray-700 hover:text-blue-600 font-medium">
        个人中心
       </a>
       <button class="block w-full text-left py-2 text-gray-700 hover:text-purple-600 font-medium relative" onclick="showProjectManagement()" id="mobile-project-management-btn">
        项目管理
         <span id="mobile-project-notification-dot" class="absolute top-2 right-2 w-3 h-3 bg-red-500 rounded-full hidden"></span>
       </button>
       <a href="admin.html" class="block w-full text-left py-2 text-gray-700 hover:text-green-600 font-medium hidden" id="mobile-admin-link">
        管理后台
       </a>
       <button class="block w-full text-left py-2 text-red-600 hover:text-red-700 font-medium" onclick="handleLogout()">
        退出
       </button>
      </div>
     </div>
    </div>
   </div>
  </header>
  <!-- 英雄区域 -->
  <section class="pt-24 md:pt-32 pb-16 md:pb-24 bg-gradient-to-br from-blue-50 to-indigo-50" id="home">
   <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex flex-col md:flex-row items-center">
     <div class="md:w-1/2 mb-10 md:mb-0 md:pr-10">
      <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold leading-tight text-dark mb-6 text-shadow">
       天涯极客社团
       <br/>
       <span class="text-primary">
        在这里，热爱终会相遇
       </span>
      </h1>
      <p class="text-lg md:text-xl text-gray-600 mb-8 leading-relaxed">
       你是否曾在校园里徘徊，想找一群和你"同频"的人？你是否总被某个爱好"挠得心痒痒"，却找不到一起深耕的伙伴？如果答案是"是"，那或许你和天涯极客社团的故事，该从这里开始了。
      </p>
      <div class="flex flex-wrap gap-4">
       <a class="bg-primary hover:bg-primary/90 text-white px-6 py-3 rounded-lg text-lg font-medium transition-all shadow-lg hover:shadow-xl" href="#join">
        立即加入
        <i class="fas fa-arrow-right ml-2">
        </i>
       </a>
       <a class="bg-white hover:bg-gray-50 text-primary border border-primary px-6 py-3 rounded-lg text-lg font-medium transition-all shadow-md hover:shadow-lg" href="#about">
        了解更多
        <i class="fas fa-info-circle ml-2">
        </i>
       </a>
      </div>
     </div>
     <div class="md:w-1/2 relative">
      <div class="relative z-10 rounded-2xl overflow-hidden shadow-2xl transform transition-transform hover:scale-[1.02] duration-500">
       <div class="relative group">
         <video id="hero-video" autoplay muted loop playsinline class="w-full h-auto object-cover" style="min-height: 400px;">
          <source src="images/视频.mp4" type="video/mp4">
          您的浏览器不支持视频播放。
         </video>
         
         <!-- 视频控制层 -->
         <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
           <!-- 进度条 -->
           <div class="mb-3">
             <div class="w-full bg-white/30 rounded-full h-1 cursor-pointer" id="progress-bar">
               <div class="bg-white rounded-full h-1 transition-all duration-100" id="progress-fill" style="width: 0%"></div>
             </div>
           </div>
           
           <!-- 控制按钮 -->
           <div class="flex items-center justify-between">
             <div class="flex items-center space-x-3">
               <!-- 播放/暂停按钮 -->
               <button id="play-pause-btn" class="text-white hover:text-gray-200 transition-colors">
                 <i class="fas fa-pause text-lg"></i>
               </button>
               
               <!-- 音量控制 -->
               <div class="flex items-center space-x-2">
                 <button id="mute-btn" class="text-white hover:text-gray-200 transition-colors">
                   <i class="fas fa-volume-mute text-lg"></i>
                 </button>
                 <div class="w-16 bg-white/30 rounded-full h-1 cursor-pointer" id="volume-bar">
                   <div class="bg-white rounded-full h-1 transition-all duration-100" id="volume-fill" style="width: 100%"></div>
                 </div>
               </div>
             </div>
             
             <!-- 时间显示 -->
             <div class="text-white text-sm">
               <span id="current-time">0:00</span> / <span id="total-time">0:00</span>
             </div>
           </div>
         </div>
       </div>
      </div>
      <div class="absolute -bottom-6 -left-6 w-40 h-40 bg-secondary/20 rounded-full blur-3xl z-0">
      </div>
      <div class="absolute -top-6 -right-6 w-40 h-40 bg-primary/20 rounded-full blur-3xl z-0">
      </div>
     </div>
    </div>
    <!-- 滚动提示 -->
    <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce">
     <a class="text-gray-500 hover:text-primary" href="#about">
      <i class="fas fa-chevron-down text-2xl">
      </i>
     </a>
    </div>
   </div>
  </section>
  <!-- 关于我们 -->
  <section class="py-20 bg-white" id="about">
   <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
     <h2 class="text-[clamp(1.8rem,4vw,2.5rem)] font-bold text-dark mb-4">
      关于我们
     </h2>
     <div class="w-20 h-1 bg-primary mx-auto mb-6">
     </div>
     <p class="text-gray-600 max-w-3xl mx-auto text-lg">
      天涯极客社团成立于2018年，是一个由技术爱好者组成的创新团队，致力于探索前沿科技，培养实践能力，创造有价值的项目。
     </p>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
     <div class="bg-gray-50 rounded-xl p-8 shadow-md card-hover">
      <div class="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-6">
       <i class="fas fa-lightbulb text-primary text-2xl">
       </i>
      </div>
      <h3 class="text-xl font-bold mb-4">
       我们的使命
      </h3>
      <p class="text-gray-600">
       为热爱技术的同学提供一个交流、学习和实践的平台，培养创新思维和解决实际问题的能力，共同成长为未来科技领域的领军人才。
      </p>
     </div>
     <div class="bg-gray-50 rounded-xl p-8 shadow-md card-hover">
      <div class="w-16 h-16 bg-secondary/10 rounded-full flex items-center justify-center mb-6">
       <i class="fas fa-eye text-secondary text-2xl">
       </i>
      </div>
      <h3 class="text-xl font-bold mb-4">
       我们的愿景
      </h3>
      <p class="text-gray-600">
       成为校园内最具影响力的技术社团，连接学术与产业，培养具有国际视野和创新能力的复合型人才，为科技发展贡献力量。
      </p>
     </div>
     <div class="bg-gray-50 rounded-xl p-8 shadow-md card-hover">
      <div class="w-16 h-16 bg-accent/10 rounded-full flex items-center justify-center mb-6">
       <i class="fas fa-heart text-accent text-2xl">
       </i>
      </div>
      <h3 class="text-xl font-bold mb-4">
       我们的价值观
      </h3>
      <p class="text-gray-600">
       开放包容、协作创新、精益求精、乐于分享。我们相信技术的力量，更相信团队协作能创造无限可能。
      </p>
     </div>
    </div>
    <div class="mt-20 bg-gradient-to-r from-primary/5 to-secondary/5 rounded-2xl p-8 md:p-12">
     <div class="flex flex-col md:flex-row items-center">
      <div class="md:w-1/2 mb-10 md:mb-0 md:pr-10">
       <h3 class="text-2xl font-bold mb-6">
        我们的活动
       </h3>
       <ul class="space-y-4">
        <li class="flex items-start">
         <i class="fas fa-check-circle text-primary mt-1 mr-3">
         </i>
         <span>
          每周技术分享会，探讨前沿技术动态与实践经验
         </span>
        </li>
        <li class="flex items-start">
         <i class="fas fa-check-circle text-primary mt-1 mr-3">
         </i>
         <span>
          项目开发实战，从构思到实现完整的产品开发流程
         </span>
        </li>
        <li class="flex items-start">
         <i class="fas fa-check-circle text-primary mt-1 mr-3">
         </i>
         <span>
          技术竞赛备赛与参与，提升实战能力与团队协作
         </span>
        </li>
        <li class="flex items-start">
         <i class="fas fa-check-circle text-primary mt-1 mr-3">
         </i>
         <span>
          校企合作项目对接，接触真实商业需求与解决方案
         </span>
        </li>
        <li class="flex items-start">
         <i class="fas fa-check-circle text-primary mt-1 mr-3">
         </i>
         <span>
          技术工作坊与培训，针对性提升特定技能
         </span>
        </li>
       </ul>
      </div>
      <div class="md:w-1/2 grid grid-cols-2 gap-2">
       <img alt="技术分享会" class="rounded-lg shadow-md w-full h-40 object-cover card-hover" src="images/我们的活动/1.jpg"/>
       <img alt="项目开发" class="rounded-lg shadow-md w-full h-40 object-cover card-hover mt-4" src="images/我们的活动/2.jpg"/>
       <img alt="技术竞赛" class="rounded-lg shadow-md w-full h-40 object-cover card-hover" src="images/我们的活动/3.jpg"/>
       <img alt="技术工作坊" class="rounded-lg shadow-md w-full h-40 object-cover card-hover mt-4" src="images/我们的活动/4.jpg"/>
      </div>
     </div>
    </div>
   </div>
  </section>
  <!-- 成就展示 -->
  <section class="py-20 bg-gray-50" id="achievements">
   <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
     <h2 class="text-[clamp(1.8rem,4vw,2.5rem)] font-bold text-dark mb-4">
      比赛风采
     </h2>
     <div class="w-20 h-1 bg-primary mx-auto mb-6">
     </div>
     <p class="text-gray-600 max-w-3xl mx-auto text-lg">
      记录我们团队在各类比赛中的精彩瞬间，展现团队协作与创新精神。
     </p>
    </div>
    <!-- 比赛风采照片轮播 -->
    <div class="relative overflow-hidden rounded-2xl bg-gradient-to-r from-blue-50 to-purple-50 p-6">
      <div class="text-center mb-6">
        <h4 class="text-xl font-bold text-gray-800 mb-2">比赛风采照片</h4>
        <p class="text-gray-600">记录我们团队在比赛中的精彩瞬间</p>
      </div>
      
      <!-- 照片轮播容器 -->
      <div class="relative">
        <div id="competition-photos-carousel" class="flex transition-all duration-700 ease-in-out" style="min-height: 600px;">
          <!-- 照片将通过JavaScript动态生成 -->
        </div>
        
        <!-- 左右导航按钮 -->
        <button id="competition-prev-btn" class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white text-gray-800 p-3 rounded-full shadow-lg transition-all duration-300 hover:scale-110 z-10">
          <i class="fas fa-chevron-left text-lg"></i>
        </button>
        <button id="competition-next-btn" class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white text-gray-800 p-3 rounded-full shadow-lg transition-all duration-300 hover:scale-110 z-10">
          <i class="fas fa-chevron-right text-lg"></i>
        </button>
        
        <!-- 指示器 -->
        <div id="competition-carousel-indicators" class="flex justify-center mt-4 space-x-2">
          <!-- 指示器将通过JavaScript动态生成 -->
        </div>
      </div>
    </div>
    <!-- 成就统计 -->
    <div class="mt-20 bg-white rounded-2xl shadow-lg p-8">
     <div class="text-center mb-12">
      <h3 class="text-2xl font-bold mb-2">
       我们的成就数据
      </h3>
      <p class="text-gray-600">
       过去三年来，我们在各类竞赛中取得的成绩
      </p>
     </div>
     <div class="grid grid-cols-2 md:grid-cols-4 gap-6 text-center">
      <div class="p-6 rounded-xl bg-primary/5">
       <div class="text-4xl font-bold text-primary mb-2 counter" data-target="18">
        0
       </div>
       <p class="text-gray-600">
        获奖总数
       </p>
      </div>
      <div class="p-6 rounded-xl bg-secondary/5">
       <div class="text-4xl font-bold text-secondary mb-2 counter" data-target="7">
        0
       </div>
       <p class="text-gray-600">
        国家级奖项
       </p>
      </div>
      <div class="p-6 rounded-xl bg-accent/5">
       <div class="text-4xl font-bold text-accent mb-2 counter" data-target="3">
        0
       </div>
       <p class="text-gray-600">
        国际级奖项
       </p>
      </div>
      <div class="p-6 rounded-xl bg-green-50">
       <div class="text-4xl font-bold text-green-500 mb-2 counter" data-target="95">
        0
       </div>
       <p class="text-gray-600">
        参赛获奖率(%)
       </p>
      </div>
     </div>
     
     <!-- 成就证书轮播展示 -->
            <div class="mt-3 relative overflow-hidden rounded-2xl bg-gradient-to-r from-blue-50 to-purple-50 p-3">
       <div class="text-center mb-3">
                    <h4 class="text-xl font-bold text-gray-800 mb-1">荣誉证书展示</h4>
           <p class="text-gray-600">见证我们的成长与成就</p>
       </div>
       
                <!-- 轮播容器 -->
       <div class="relative">
         <div id="certificate-carousel" class="flex transition-transform duration-700 ease-in-out" style="min-height: 400px;">
           <!-- 证书图片将通过JavaScript动态生成 -->
         </div>
         
         <!-- 左右导航按钮 -->
                    <button id="prev-btn" class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white text-gray-800 p-3 rounded-full shadow-lg transition-all duration-300 hover:scale-110 z-10">
           <i class="fas fa-chevron-left text-lg"></i>
         </button>
                    <button id="next-btn" class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white text-gray-800 p-3 rounded-full shadow-lg transition-all duration-300 hover:scale-110 z-10">
           <i class="fas fa-chevron-right text-lg"></i>
         </button>
         
         <!-- 指示器 -->
                    <div id="carousel-indicators" class="flex justify-center mt-1 space-x-2">
           <!-- 指示器将通过JavaScript动态生成 -->
         </div>
       </div>
     </div>
    </div>
   </div>
  </section>
  <!-- 项目作品 -->
  <section class="py-20 bg-white" id="projects">
   <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
     <h2 class="text-[clamp(1.8rem,4vw,2.5rem)] font-bold text-dark mb-4">
      项目作品
     </h2>
     <div class="w-20 h-1 bg-primary mx-auto mb-6">
     </div>
     <p class="text-gray-600 max-w-3xl mx-auto text-lg">
      探索我们团队开发的创新项目，每一个作品都凝聚了成员们的智慧与汗水。
     </p>
    </div>

    <!-- 项目展示 -->
    <div id="projects-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">





    </div>
    <div class="text-center mt-12">
     <button onclick="showAllProjects()" class="inline-flex items-center bg-white border border-primary text-primary hover:bg-primary/5 px-6 py-3 rounded-lg font-medium transition-colors">
      查看更多项目
      <i class="fas fa-chevron-right ml-2">
      </i>
     </button>
    </div>
   </div>
  </section>
  <!-- 团队风采 -->
  <section class="py-20 bg-gray-50" id="team">
   <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
     <h2 class="text-[clamp(1.8rem,4vw,2.5rem)] font-bold text-dark mb-4">
      团队风采
     </h2>
     <div class="w-20 h-1 bg-primary mx-auto mb-6">
     </div>
     <p class="text-gray-600 max-w-3xl mx-auto text-lg">
      认识我们充满活力和创造力的核心团队成员，每个人都在各自领域拥有专业技能和热情。
     </p>
    </div>
    <!-- 团队领导 -->
    <div class="mb-20">
     <h3 class="text-2xl font-bold mb-8 text-center">
      核心团队
     </h3>
     <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
      <!-- 团队成员1 -->
      <div class="bg-white rounded-xl overflow-hidden shadow-md text-center card-hover">
       <div class="relative">
        <img alt="张明 - 社长" class="w-full h-64 object-cover" src="https://design.gemcoder.com/staticResource/echoAiSystemImages/757936d95a43580eda1165d8f9399425.png"/>
        <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4">
         <h4 class="text-white font-bold text-lg">
          张明
         </h4>
         <p class="text-white/80 text-sm">
          社长
         </p>
        </div>
       </div>
       <div class="p-6">
        <p class="text-gray-600 mb-4">
         计算机科学专业，全栈开发工程师，曾获全国大学生计算机设计大赛一等奖。
        </p>
        <div class="flex justify-center space-x-3">
         <a class="text-gray-400 hover:text-primary transition-colors" href="javascript:void(0);">
          <i class="fab fa-github">
          </i>
         </a>
         <a class="text-gray-400 hover:text-primary transition-colors" href="javascript:void(0);">
          <i class="fab fa-linkedin">
          </i>
         </a>
         <a class="text-gray-400 hover:text-primary transition-colors" href="javascript:void(0);">
          <i class="fab fa-weixin">
          </i>
         </a>
        </div>
       </div>
      </div>
      <!-- 团队成员2 -->
      <div class="bg-white rounded-xl overflow-hidden shadow-md text-center card-hover">
       <div class="relative">
        <img alt="李华 - 技术总监" class="w-full h-64 object-cover" src="https://design.gemcoder.com/staticResource/echoAiSystemImages/c82155d876c64108fd29703bdbe53433.png"/>
        <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4">
         <h4 class="text-white font-bold text-lg">
          李华
         </h4>
         <p class="text-white/80 text-sm">
          技术总监
         </p>
        </div>
       </div>
       <div class="p-6">
        <p class="text-gray-600 mb-4">
         软件工程专业，人工智能研究员，国际大学生程序设计竞赛银奖得主。
        </p>
        <div class="flex justify-center space-x-3">
         <a class="text-gray-400 hover:text-primary transition-colors" href="javascript:void(0);">
          <i class="fab fa-github">
          </i>
         </a>
         <a class="text-gray-400 hover:text-primary transition-colors" href="javascript:void(0);">
          <i class="fab fa-linkedin">
          </i>
         </a>
         <a class="text-gray-400 hover:text-primary transition-colors" href="javascript:void(0);">
          <i class="fab fa-weixin">
          </i>
         </a>
        </div>
       </div>
      </div>
      <!-- 团队成员3 -->
      <div class="bg-white rounded-xl overflow-hidden shadow-md text-center card-hover">
       <div class="relative">
        <img alt="王芳 - 设计总监" class="w-full h-64 object-cover" src="https://design.gemcoder.com/staticResource/echoAiSystemImages/62da7580fa410da1efa436c7aa10b948.png"/>
        <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4">
         <h4 class="text-white font-bold text-lg">
          王芳
         </h4>
         <p class="text-white/80 text-sm">
          设计总监
         </p>
        </div>
       </div>
       <div class="p-6">
        <p class="text-gray-600 mb-4">
         数字媒体艺术专业，UI/UX设计师，移动应用创新大赛最佳设计奖获得者。
        </p>
        <div class="flex justify-center space-x-3">
         <a class="text-gray-400 hover:text-primary transition-colors" href="javascript:void(0);">
          <i class="fab fa-dribbble">
          </i>
         </a>
         <a class="text-gray-400 hover:text-primary transition-colors" href="javascript:void(0);">
          <i class="fab fa-behance">
          </i>
         </a>
         <a class="text-gray-400 hover:text-primary transition-colors" href="javascript:void(0);">
          <i class="fab fa-weixin">
          </i>
         </a>
        </div>
       </div>
      </div>
      <!-- 团队成员4 -->
      <div class="bg-white rounded-xl overflow-hidden shadow-md text-center card-hover">
       <div class="relative">
        <img alt="赵强 - 项目总监" class="w-full h-64 object-cover" src="https://design.gemcoder.com/staticResource/echoAiSystemImages/0497a249a901ec29e5d4aaa95a41c5ca.png"/>
        <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4">
         <h4 class="text-white font-bold text-lg">
          赵强
         </h4>
         <p class="text-white/80 text-sm">
          项目总监
         </p>
        </div>
       </div>
       <div class="p-6">
        <p class="text-gray-600 mb-4">
         信息管理专业，项目管理专家，带领团队完成多项校企合作项目。
        </p>
        <div class="flex justify-center space-x-3">
         <a class="text-gray-400 hover:text-primary transition-colors" href="javascript:void(0);">
          <i class="fab fa-github">
          </i>
         </a>
         <a class="text-gray-400 hover:text-primary transition-colors" href="javascript:void(0);">
          <i class="fab fa-linkedin">
          </i>
         </a>
         <a class="text-gray-400 hover:text-primary transition-colors" href="javascript:void(0);">
          <i class="fab fa-weixin">
          </i>
         </a>
        </div>
       </div>
      </div>
     </div>
    </div>
    <!-- 团队活动照片轮播 -->
    <div class="mt-20">
     <h3 class="text-2xl font-bold mb-8 text-center">
      团队活动瞬间
     </h3>
     <div class="relative overflow-hidden rounded-2xl bg-gradient-to-r from-blue-50 to-purple-50 p-6">
       <div class="text-center mb-6">
         <h4 class="text-xl font-bold text-gray-800 mb-2">团队活动照片</h4>
         <p class="text-gray-600">记录我们团队在各类活动中的精彩瞬间</p>
       </div>
       
       <!-- 照片轮播容器 -->
       <div class="relative">
         <div id="team-activity-carousel" class="flex transition-all duration-700 ease-in-out" style="min-height: 600px;">
           <!-- 照片将通过JavaScript动态生成 -->
         </div>
         
         <!-- 左右导航按钮 -->
         <button id="team-activity-prev-btn" class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white text-gray-800 p-3 rounded-full shadow-lg transition-all duration-300 hover:scale-110 z-10">
           <i class="fas fa-chevron-left text-lg"></i>
         </button>
         <button id="team-activity-next-btn" class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white text-gray-800 p-3 rounded-full shadow-lg transition-all duration-300 hover:scale-110 z-10">
           <i class="fas fa-chevron-right text-lg"></i>
         </button>
         
         <!-- 指示器 -->
         <div id="team-activity-carousel-indicators" class="flex justify-center mt-4 space-x-2">
           <!-- 指示器将通过JavaScript动态生成 -->
         </div>
       </div>
     </div>
    </div>
   </div>
  </section>

  <!-- 加入我们 -->
  <section class="py-20 bg-white" id="join">
   <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
     <h2 class="text-[clamp(1.8rem,4vw,2.5rem)] font-bold text-dark mb-4">
      加入我们
     </h2>
     <div class="w-20 h-1 bg-primary mx-auto mb-6">
     </div>
     <p class="text-gray-600 max-w-3xl mx-auto text-lg">
      无论你是技术大牛还是刚入门的新手，只要你对技术充满热情，渴望学习和成长，我们都欢迎你的加入！
     </p>
    </div>
    <div class="bg-gradient-to-br from-primary/5 to-secondary/5 rounded-2xl p-8 md:p-12">
     <div class="flex flex-col lg:flex-row gap-12">
      <div class="lg:w-1/2">
       <h3 class="text-2xl font-bold mb-6">
        为什么加入我们？
       </h3>
       <div class="space-y-6">
        <div class="flex">
         <div class="flex-shrink-0 w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mr-4">
          <i class="fas fa-graduation-cap text-primary text-xl">
          </i>
         </div>
         <div>
          <h4 class="text-lg font-bold mb-2">
           专业技能提升
          </h4>
          <p class="text-gray-600">
           通过实战项目和技术分享，快速提升编程、设计和项目管理能力，积累作品集和项目经验。
          </p>
         </div>
        </div>
        <div class="flex">
         <div class="flex-shrink-0 w-12 h-12 bg-secondary/10 rounded-full flex items-center justify-center mr-4">
          <i class="fas fa-users text-secondary text-xl">
          </i>
         </div>
         <div>
          <h4 class="text-lg font-bold mb-2">
           拓展人脉资源
          </h4>
          <p class="text-gray-600">
           结识一群志同道合的伙伴，建立长期的专业联系，为未来的学习和职业发展打下基础。
          </p>
         </div>
        </div>
        <div class="flex">
         <div class="flex-shrink-0 w-12 h-12 bg-accent/10 rounded-full flex items-center justify-center mr-4">
          <i class="fas fa-trophy text-accent text-xl">
          </i>
         </div>
         <div>
          <h4 class="text-lg font-bold mb-2">
           竞赛获奖机会
          </h4>
          <p class="text-gray-600">
           参与各类技术竞赛，赢取奖项和奖金，提升个人竞争力和简历含金量。
          </p>
         </div>
        </div>
        <div class="flex">
         <div class="flex-shrink-0 w-12 h-12 bg-green-500/10 rounded-full flex items-center justify-center mr-4">
          <i class="fas fa-briefcase text-green-500 text-xl">
          </i>
         </div>
         <div>
          <h4 class="text-lg font-bold mb-2">
           就业实习推荐
          </h4>
          <p class="text-gray-600">
           优秀成员将获得校企合作项目优先参与权和知名企业实习推荐机会。
          </p>
         </div>
        </div>
       </div>
       <div class="mt-10 bg-white p-6 rounded-xl shadow-md">
        <h4 class="text-lg font-bold mb-4">
         我们寻找这样的你
        </h4>
        <ul class="space-y-3">
         <li class="flex items-start">
          <i class="fas fa-check-circle text-primary mt-1 mr-3">
          </i>
          <div>
           <h5 class="font-medium text-gray-800">
            热爱编程技术
           </h5>
           <p class="text-gray-600 text-sm">
            对编程有浓厚兴趣，愿意投入时间学习和实践
           </p>
          </div>
         </li>
         <li class="flex items-start">
          <i class="fas fa-check-circle text-primary mt-1 mr-3">
          </i>
          <div>
           <h5 class="font-medium text-gray-800">
            具备团队精神
           </h5>
           <p class="text-gray-600 text-sm">
            善于沟通协作，能够在团队中发挥积极作用
           </p>
          </div>
         </li>
         <li class="flex items-start">
          <i class="fas fa-check-circle text-primary mt-1 mr-3">
          </i>
          <div>
           <h5 class="font-medium text-gray-800">
            持续学习态度
           </h5>
           <p class="text-gray-600 text-sm">
            愿意接受挑战，不断提升自己的技术水平
           </p>
          </div>
         </li>
         <li class="flex items-start">
          <i class="fas fa-check-circle text-primary mt-1 mr-3">
          </i>
          <div>
           <h5 class="font-medium text-gray-800">
            创新思维能力
           </h5>
           <p class="text-gray-600 text-sm">
            具备创新意识，能够提出新颖的想法和解决方案
           </p>
          </div>
         </li>
        </ul>
       </div>
      </div>
      <div class="lg:w-1/2 bg-white rounded-2xl shadow-lg p-8">
       <div id="login-required-section" class="flex items-center justify-center min-h-[400px]">
         <div class="text-center max-w-md">
           <div class="mb-8">
             <i class="fas fa-lock text-6xl text-gray-400 mb-6"></i>
             <h3 class="text-3xl font-bold text-gray-800 mb-4">需要登录</h3>
             <p class="text-gray-600 text-lg">请先登录或注册账号，然后才能提交报名表</p>
           </div>
           <div class="flex flex-col sm:flex-row gap-4 justify-center">
             <button onclick="showLoginModal()" class="bg-primary hover:bg-primary/90 text-white font-bold py-3 px-8 rounded-lg transition-colors shadow-lg hover:shadow-xl">
               登录
             </button>
             <button onclick="showRegisterModal()" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-8 rounded-lg transition-colors shadow-lg hover:shadow-xl">
               注册
             </button>
           </div>
         </div>
       </div>
       
       <div id="application-form-section" class="hidden">
         <h3 class="text-2xl font-bold mb-6">
           填写报名表
         </h3>
         <form class="space-y-6" id="recruitment-form">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
         <div>
          <label class="block text-gray-700 font-medium mb-2" for="name">
           姓名 <span class="text-red-500">*</span>
          </label>
          <input class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors" id="name" name="name" placeholder="请输入您的姓名" required="" type="text"/>
         </div>
         <div>
          <label class="block text-gray-700 font-medium mb-2" for="student-id">
           学号 <span class="text-red-500">*</span>
          </label>
          <input class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors" id="student-id" name="student_id" placeholder="请输入您的学号" required="" type="text"/>
         </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
         <div>
          <label class="block text-gray-700 font-medium mb-2" for="major">
           专业 <span class="text-red-500">*</span>
          </label>
          <input class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors" id="major" name="major" placeholder="请输入您的专业" required="" type="text"/>
         </div>

        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
         <div>
          <label class="block text-gray-700 font-medium mb-2" for="email">
           邮箱 <span class="text-red-500">*</span>
          </label>
          <input class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors" id="email" name="email" placeholder="请输入您的邮箱" required="" type="email"/>
         </div>
         <div>
          <label class="block text-gray-700 font-medium mb-2" for="phone">
           手机号 <span class="text-red-500">*</span>
          </label>
          <input class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors" id="phone" name="phone" placeholder="请输入您的手机号" required="" type="tel"/>
         </div>
        </div>
        <div>
         <label class="block text-gray-700 font-medium mb-2" for="department">
          意向部门 <span class="text-red-500">*</span>
         </label>
         <select class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors" id="department" name="department" required="">
          <option value="">
           请选择意向部门
          </option>
          <option value="开发部">开发部</option>
          <option value="设计部">设计部</option>
          <option value="人工智能部">人工智能部</option>
          <option value="物联网部">物联网部</option>
          <option value="市场部">市场部</option>
         </select>
        </div>
        <div>
         <label class="block text-gray-700 font-medium mb-2" for="skills">
          掌握技能 <span class="text-red-500">*</span>
         </label>
         <input class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors" id="skills" name="skills" placeholder="请输入您掌握的技能，多个技能用逗号分隔" required="" type="text"/>
        </div>
        <div>
         <label class="block text-gray-700 font-medium mb-2" for="experience">
          项目/竞赛经验
         </label>
         <textarea class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors" id="experience" name="experience" placeholder="请简述您的项目或竞赛经验，没有可不填" rows="4">
        </textarea>
        </div>
        <div>
         <label class="block text-gray-700 font-medium mb-2" for="motivation">
          加入动机 <span class="text-red-500">*</span>
         </label>
         <textarea class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors" id="motivation" name="motivation" placeholder="请简述您加入社团的动机和期望" required="" rows="4">
        </textarea>
        </div>
        <div>
         <label class="block text-gray-700 font-medium mb-2" for="photo">
          证件照 <span class="text-red-500">*</span>
         </label>
         <div class="space-y-3">
          <input class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors" id="photo" name="photo" type="file" accept="image/*" required="" onchange="handlePhotoUpload(this)"/>
          <div class="text-sm text-gray-500">
           <i class="fas fa-info-circle mr-1"></i>
           支持JPG、PNG、GIF格式，文件大小不超过5MB
          </div>
          <div id="photo-preview" class="hidden">
           <img id="photo-preview-img" class="w-32 h-32 object-cover rounded-lg border" alt="证件照预览"/>
           <button type="button" class="mt-2 text-red-500 text-sm hover:text-red-700" onclick="removePhoto()">
            <i class="fas fa-trash mr-1"></i>删除
           </button>
          </div>
         </div>
        </div>
        <div>
         <label class="block text-gray-700 font-medium mb-2" for="portfolio">
          作品集/个人网站（可选）
         </label>
         <input class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors" id="portfolio" name="portfolio" placeholder="请输入您的作品集链接或个人网站地址" type="text"/>
        </div>
        <button class="w-full bg-primary hover:bg-primary/90 text-white font-bold py-3 px-6 rounded-lg transition-colors shadow-lg hover:shadow-xl flex items-center justify-center" type="submit">
         <i class="fas fa-paper-plane mr-2">
         </i>
         提交报名
        </button>
       </form>
      </div>
     </div>
    </div>
   </div>
  </section>
  <!-- 常见问题 -->
  <section class="py-20 bg-gray-50">
   <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
     <h2 class="text-[clamp(1.8rem,4vw,2.5rem)] font-bold text-dark mb-4">
      常见问题
     </h2>
     <div class="w-20 h-1 bg-primary mx-auto mb-6">
     </div>
     <p class="text-gray-600 max-w-3xl mx-auto text-lg">
      关于加入社团的常见问题解答，如果您有其他疑问，欢迎联系我们
     </p>
    </div>
    <div class="max-w-3xl mx-auto">
     <div class="space-y-4">
      <!-- FAQ项目1 -->
      <div class="bg-white rounded-xl shadow-md overflow-hidden">
       <button class="faq-toggle w-full flex justify-between items-center p-6 text-left focus:outline-none">
        <span class="text-lg font-bold text-gray-800">
         加入社团需要具备编程基础吗？
        </span>
        <i class="fas fa-chevron-down text-gray-400 transition-transform">
        </i>
       </button>
       <div class="faq-content hidden px-6 pb-6">
        <p class="text-gray-600">
         不需要！我们欢迎所有对技术感兴趣的同学加入，无论您是否有编程基础。社团会为新成员提供系统的培训，帮助大家从零基础开始学习。我们更看重的是您的学习热情和团队合作精神。
        </p>
       </div>
      </div>
      <!-- FAQ项目2 -->
      <div class="bg-white rounded-xl shadow-md overflow-hidden">
       <button class="faq-toggle w-full flex justify-between items-center p-6 text-left focus:outline-none">
        <span class="text-lg font-bold text-gray-800">
         社团活动时间如何安排？会影响学习吗？
        </span>
        <i class="fas fa-chevron-down text-gray-400 transition-transform">
        </i>
       </button>
       <div class="faq-content hidden px-6 pb-6">
        <p class="text-gray-600">
         我们的常规活动一般安排在周末或工作日晚上，具体时间会提前一周通知。我们鼓励成员平衡学习和社团活动，不会强制要求参与所有活动。对于有考试的时间段，我们会减少活动安排，确保大家能专注于学业。
        </p>
       </div>
      </div>
      <!-- FAQ项目3 -->
      <div class="bg-white rounded-xl shadow-md overflow-hidden">
       <button class="faq-toggle w-full flex justify-between items-center p-6 text-left focus:outline-none">
        <span class="text-lg font-bold text-gray-800">
         社团有纳新人数限制吗？
        </span>
        <i class="fas fa-chevron-down text-gray-400 transition-transform">
        </i>
       </button>
       <div class="faq-content hidden px-6 pb-6">
        <p class="text-gray-600">
         各部门会根据实际需求设定招募人数，但我们总体上希望吸纳更多有热情的同学。如果报名人数较多，我们会通过面试选拔最合适的成员。未被选中的同学也可以参加我们的公开活动和技术分享会，未来仍有机会加入。
        </p>
       </div>
      </div>
      <!-- FAQ项目4 -->
      <div class="bg-white rounded-xl shadow-md overflow-hidden">
       <button class="faq-toggle w-full flex justify-between items-center p-6 text-left focus:outline-none">
        <span class="text-lg font-bold text-gray-800">
         加入社团需要缴纳会费吗？
        </span>
        <i class="fas fa-chevron-down text-gray-400 transition-transform">
        </i>
       </button>
       <div class="faq-content hidden px-6 pb-6">
        <p class="text-gray-600">
         我们是公益性学生社团，不收取任何会费。社团活动经费主要来自学校支持、企业赞助和竞赛奖金。我们会定期公示经费使用情况，确保透明公开。
        </p>
       </div>
      </div>
      <!-- FAQ项目5 -->
      <div class="bg-white rounded-xl shadow-md overflow-hidden">
       <button class="faq-toggle w-full flex justify-between items-center p-6 text-left focus:outline-none">
        <span class="text-lg font-bold text-gray-800">
         加入后可以更换部门吗？
        </span>
        <i class="fas fa-chevron-down text-gray-400 transition-transform">
        </i>
       </button>
       <div class="faq-content hidden px-6 pb-6">
        <p class="text-gray-600">
         可以。我们理解成员可能在参与过程中发现更适合自己的方向。每学期末我们会组织部门调整，成员可以根据自己的兴趣和能力申请转部门。此外，我们也鼓励跨部门协作，让成员有机会接触不同领域的项目。
        </p>
       </div>
      </div>
      <!-- FAQ项目6 -->
      <div class="bg-white rounded-xl shadow-md overflow-hidden">
       <button class="faq-toggle w-full flex justify-between items-center p-6 text-left focus:outline-none">
        <span class="text-lg font-bold text-gray-800">
         社团会提供哪些学习资源？
        </span>
        <i class="fas fa-chevron-down text-gray-400 transition-transform">
        </i>
       </button>
       <div class="faq-content hidden px-6 pb-6">
        <p class="text-gray-600">
         我们会提供丰富的学习资源，包括：技术文档库、在线课程账号、开发工具授权、项目实战指导等。此外，我们还会定期邀请行业专家和优秀学长学姐进行分享，组织技术工作坊和黑客马拉松等活动，帮助成员提升实战能力。
        </p>
       </div>
      </div>
     </div>
    </div>
   </div>
  </section>
  <!-- 联系我们 -->
  <section class="py-20 bg-white">
   <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
     <h2 class="text-[clamp(1.8rem,4vw,2.5rem)] font-bold text-dark mb-4">
      联系我们
     </h2>
     <div class="w-20 h-1 bg-primary mx-auto mb-6">
     </div>
     <p class="text-gray-600 max-w-3xl mx-auto text-lg">
      如果您有任何疑问或建议，欢迎通过以下方式联系我们
     </p>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
     <div class="bg-gray-50 rounded-xl p-8 text-center card-hover">
      <div class="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6">
       <i class="fas fa-envelope text-primary text-2xl">
       </i>
      </div>
      <h3 class="text-xl font-bold mb-2">
       电子邮箱
      </h3>
      <p class="text-gray-600 mb-4">
       发送邮件给我们，我们会在24小时内回复
      </p>
      <a class="text-primary font-medium hover:underline" href="mailto:767997302@qq.com">
       767997302@qq.com
      </a>
     </div>
     <div class="bg-gray-50 rounded-xl p-8 text-center card-hover">
      <div class="w-16 h-16 bg-secondary/10 rounded-full flex items-center justify-center mx-auto mb-6">
       <i class="fas fa-mobile-alt text-secondary text-2xl">
       </i>
      </div>
      <h3 class="text-xl font-bold mb-2">
       联系电话
      </h3>
      <p class="text-gray-600 mb-4">
       工作日 10:00-18:00 可致电咨询
      </p>
      <a class="text-secondary font-medium hover:underline" href="tel:+8612345678901">
       18532206167
      </a>
     </div>
     <div class="bg-gray-50 rounded-xl p-8 text-center card-hover">
      <div class="w-16 h-16 bg-accent/10 rounded-full flex items-center justify-center mx-auto mb-6">
       <i class="fas fa-map-marker-alt text-accent text-2xl">
       </i>
      </div>
      <h3 class="text-xl font-bold mb-2">
       社团地址
      </h3>
      <p class="text-gray-600 mb-4">
       欢迎前来参观交流
      </p>
      <p class="font-medium">
       书信4号楼3楼
      </p>
     </div>
    </div>
    <div class="mt-16 bg-gradient-to-br from-blue-50 via-purple-50 to-indigo-50 rounded-3xl p-8 md:p-12 border border-blue-100 shadow-lg">
     <div class="flex flex-col md:flex-row items-center">
      <div class="md:w-1/2 mb-10 md:mb-0 md:pr-12">
       <div class="text-center md:text-left">
         <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full mb-6">
           <i class="fas fa-users text-white text-2xl"></i>
         </div>
         <h3 class="text-3xl md:text-4xl font-bold mb-6 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
           加入我们
         </h3>
         <p class="text-lg text-gray-700 mb-8 leading-relaxed">
           扫码加入招新群，与志同道合的伙伴一起<br class="hidden md:block">探索技术的无限可能！
         </p>
         <div class="flex flex-col sm:flex-row gap-4 justify-center md:justify-start">
           <div class="flex items-center text-blue-600 font-medium">
             <i class="fas fa-check-circle mr-2"></i>
             <span>技术交流</span>
           </div>
           <div class="flex items-center text-purple-600 font-medium">
             <i class="fas fa-check-circle mr-2"></i>
             <span>项目合作</span>
           </div>
         </div>
       </div>
      </div>
      <div class="md:w-1/2">
       <div class="relative">
         <div class="absolute -inset-4 bg-gradient-to-r from-blue-400 to-purple-500 rounded-3xl blur-xl opacity-20"></div>
         <div class="relative bg-white p-6 rounded-2xl shadow-2xl border border-gray-100 transform hover:scale-105 transition-all duration-300">
           <div class="text-center mb-4">
             <h4 class="text-lg font-bold text-gray-800 mb-2">2025天涯极客招新群</h4>
             <p class="text-sm text-gray-600">扫描二维码，立即加入</p>
           </div>
           <img alt="招新群二维码" class="w-64 h-64 object-contain rounded-xl mx-auto bg-gray-50" src="images/招新二维码.jpg"/>
         </div>
       </div>
      </div>
     </div>
    </div>
   </div>
  </section>
  <!-- 页脚 -->
  <footer class="bg-dark text-white pt-16 pb-8">
   <div class="container mx-auto px-4 sm:px-6 lg:px-8" data-ytextravalue="extra-0ql62yknp">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-10 mb-12" data-ytindex="0" data-ytoriginindex="0">
     <div>
      <div class="flex items-center mb-6">
       <i class="fas fa-code text-primary text-2xl mr-2">
       </i>
       <span class="text-xl font-bold">
        天涯极客社团
       </span>
      </div>
      <p class="text-gray-400 mb-6">
       在这里，热爱终会相遇。我们是一群热爱技术的追梦人，致力于用科技创造美好未来。
      </p>

     </div>
     <div>
      <h4 class="text-lg font-bold mb-6">
       快速链接
      </h4>
      <ul class="space-y-3">
       <li>
        <a class="text-gray-400 hover:text-primary transition-colors" href="#home">
         首页
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-primary transition-colors" href="#about">
         关于我们
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-primary transition-colors" href="#achievements">
         成就展示
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-primary transition-colors" href="#projects">
         项目作品
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-primary transition-colors" href="#team">
         团队风采
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-primary transition-colors" href="#join">
         加入我们
        </a>
       </li>
      </ul>
     </div>
     <div>
      <h4 class="text-lg font-bold mb-6">
       部门导航
      </h4>
      <ul class="space-y-3">
       <li>
        <a class="text-gray-400 hover:text-primary transition-colors" href="javascript:void(0);">
         开发部
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-primary transition-colors" href="javascript:void(0);">
         设计部
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-primary transition-colors" href="javascript:void(0);">
         人工智能部
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-primary transition-colors" href="javascript:void(0);">
         物联网部
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-primary transition-colors" href="javascript:void(0);">
         市场部
        </a>
       </li>
       <li>
        <a class="text-gray-400 hover:text-primary transition-colors" href="javascript:void(0);">
         项目部
        </a>
       </li>
      </ul>
     </div>
     <div>
      <h4 class="text-lg font-bold mb-6">
       联系方式
      </h4>
      <ul class="space-y-3">
       <li class="flex items-start">
        <i class="fas fa-map-marker-alt text-primary mt-1 mr-3">
        </i>
        <span class="text-gray-400">
          书信4号楼3楼
        </span>
       </li>
       <li class="flex items-start">
        <i class="fas fa-envelope text-primary mt-1 mr-3">
        </i>
        <span class="text-gray-400">
         767997302@qq.com
        </span>
       </li>
       <li class="flex items-start">
        <i class="fas fa-phone text-primary mt-1 mr-3">
        </i>
        <span class="text-gray-400">
         18532206167
        </span>
       </li>
       <li class="flex items-start">
        <i class="fas fa-clock text-primary mt-1 mr-3">
        </i>
        <span class="text-gray-400">
         周一至周五: 10:00-18:00
        </span>
       </li>
      </ul>
     </div>
    </div>
    <div class="border-t border-gray-800 pt-8" data-ytindex="1" data-ytoriginindex="1" data-ytparentvalue="extra-0ql62yknp">
     <div class="flex flex-col md:flex-row justify-between items-center">
      <p class="text-gray-500 text-sm mb-4 md:mb-0" style="left:-5px;position:relative;top:4px">
       © 2022 天涯极客社团. 保留所有权利.
      </p>
      <div class="flex space-x-6">
       <a class="text-gray-500 hover:text-gray-400 text-sm" href="javascript:void(0);">
        隐私政策
       </a>
       <a class="text-gray-500 hover:text-gray-400 text-sm" href="javascript:void(0);">
        使用条款
       </a>
       <a class="text-gray-500 hover:text-gray-400 text-sm" href="javascript:void(0);">
        网站地图
       </a>
      </div>
     </div>
    </div>
   </div>
  </footer>
  <!-- 返回顶部按钮 -->
  <button class="fixed bottom-8 right-8 bg-primary text-white w-12 h-12 rounded-full flex items-center justify-center shadow-lg opacity-0 invisible transition-all duration-300 hover:bg-primary/90" id="back-to-top">
   <i class="fas fa-chevron-up">
   </i>
  </button>

  <!-- 登录模态框 -->
  <div id="login-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-2xl font-bold text-gray-800">用户登录</h3>
        <button onclick="closeLoginModal()" class="text-gray-400 hover:text-gray-600">
          <i class="fas fa-times text-xl"></i>
        </button>
      </div>
      <form id="login-form" class="space-y-4">
        <div>
          <label class="block text-gray-700 font-medium mb-2" for="login-email">邮箱</label>
          <input type="email" id="login-email" name="email" required 
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                 placeholder="请输入您的邮箱">
        </div>
        <div>
          <label class="block text-gray-700 font-medium mb-2" for="login-password">密码</label>
          <input type="password" id="login-password" name="password" required 
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                 placeholder="请输入您的密码">
        </div>
        <div class="flex items-center justify-between">
          <label class="flex items-center">
            <input type="checkbox" id="remember-me" class="mr-2">
            <span class="text-sm text-gray-600">30天内自动登录</span>
          </label>
        </div>
        <button type="submit" class="w-full bg-primary hover:bg-primary/90 text-white font-bold py-3 px-6 rounded-lg transition-colors">
          登录
        </button>
      </form>
      <div class="mt-4 text-center">
        <span class="text-gray-600">还没有账号？</span>
        <button onclick="closeLoginModal(); showRegisterModal()" class="text-primary hover:text-primary/80 font-medium">
          立即注册
        </button>
      </div>
      <!-- 登录模态框底部添加 -->
      <div class="mt-2 text-center">
        <button onclick="showContactAdminModal()" class="text-blue-600 hover:underline text-sm">忘记密码？</button>
      </div>
    </div>
  </div>

  <!-- 注册模态框 -->
  <div id="register-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-2xl font-bold text-gray-800">用户注册</h3>
        <button onclick="closeRegisterModal()" class="text-gray-400 hover:text-gray-600">
          <i class="fas fa-times text-xl"></i>
        </button>
      </div>
      <form id="register-form" class="space-y-4">
        <div>
          <label class="block text-gray-700 font-medium mb-2" for="register-name">姓名</label>
          <input type="text" id="register-name" name="name" required 
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                 placeholder="请输入您的姓名">
        </div>
        <div>
          <label class="block text-gray-700 font-medium mb-2" for="register-email">邮箱</label>
          <input type="email" id="register-email" name="email" required 
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                 placeholder="请输入您的邮箱">
        </div>
        <div>
          <label class="block text-gray-700 font-medium mb-2" for="register-password">密码</label>
          <input type="password" id="register-password" name="password" required 
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                 placeholder="请输入您的密码（至少6位）">
        </div>
        <div>
          <label class="block text-gray-700 font-medium mb-2" for="register-confirm-password">确认密码</label>
          <input type="password" id="register-confirm-password" name="confirm_password" required 
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                 placeholder="请再次输入密码">
        </div>
        <button type="submit" class="w-full bg-primary hover:bg-primary/90 text-white font-bold py-3 px-6 rounded-lg transition-colors">
          注册
        </button>
      </form>
      <div class="mt-4 text-center">
        <span class="text-gray-600">已有账号？</span>
        <button onclick="closeRegisterModal(); showLoginModal()" class="text-primary hover:text-primary/80 font-medium">
          立即登录
        </button>
      </div>
    </div>
  </div>

  <!-- JavaScript -->
  <script>
   // 页面加载时初始化
document.addEventListener('DOMContentLoaded', function () {
  // 初始化视频控制
  initVideoControls();
  
  // 初始化证书轮播
  initCertificateCarousel();
  
  // 初始化比赛风采照片轮播
  setTimeout(() => {
    initCompetitionPhotosCarousel();
  }, 100);
  
  // 初始化团队活动照片轮播
  setTimeout(() => {
    initTeamActivityCarousel();
  }, 200);
  
  // 初始化项目作品展示
  setTimeout(() => {
    initProjectsDisplay();
  }, 300);
  
  // 导航栏滚动效果
  var navbar = document.getElementById('navbar');
  window.addEventListener('scroll', function () {
    if (window.scrollY > 50) {
      navbar.classList.add('shadow-md');
      navbar.classList.remove('shadow-sm');
    } else {
      navbar.classList.remove('shadow-md');
      navbar.classList.add('shadow-sm');
    }
  });

  // 移动端菜单切换
  var menuToggle = document.getElementById('menu-toggle');
  var mobileMenu = document.getElementById('mobile-menu');
  menuToggle.addEventListener('click', function () {
    mobileMenu.classList.toggle('hidden');
  });

  // 平滑滚动
  document.querySelectorAll('a[href^="#"]').forEach(function (anchor) {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();

      // 关闭移动菜单（如果打开）
      if (!mobileMenu.classList.contains('hidden')) {
        mobileMenu.classList.add('hidden');
      }
      var targetId = this.getAttribute('href');
      var targetElement = document.querySelector(targetId);
      if (targetElement) {
        window.scrollTo({
          top: targetElement.offsetTop - 80,
          behavior: 'smooth'
        });
      }
    });
  });

  // 返回顶部按钮
  var backToTopButton = document.getElementById('back-to-top');
  window.addEventListener('scroll', function () {
    if (window.scrollY > 300) {
      backToTopButton.classList.remove('opacity-0', 'invisible');
      backToTopButton.classList.add('opacity-100', 'visible');
    } else {
      backToTopButton.classList.add('opacity-0', 'invisible');
      backToTopButton.classList.remove('opacity-100', 'visible');
    }
  });
  backToTopButton.addEventListener('click', function () {
    window.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
  });

  // FAQ切换
  var faqToggles = document.querySelectorAll('.faq-toggle');
  faqToggles.forEach(function (toggle) {
    toggle.addEventListener('click', function () {
      var content = toggle.nextElementSibling;
      var icon = toggle.querySelector('i');

      // 关闭其他所有FAQ
      document.querySelectorAll('.faq-content').forEach(function (item) {
        if (item !== content) {
          item.classList.add('hidden');
          item.previousElementSibling.querySelector('i').classList.remove('transform', 'rotate-180');
        }
      });

      // 切换当前FAQ
      content.classList.toggle('hidden');
      icon.classList.toggle('transform');
      icon.classList.toggle('rotate-180');
    });
  });



  // 数字计数动画
  var counters = document.querySelectorAll('.counter');
  var speed = 200;
  var animateCounters = function animateCounters() {
    counters.forEach(function (counter) {
      var target = +counter.getAttribute('data-target');
      var count = +counter.innerText;
      var increment = target / speed;
      if (count < target) {
        counter.innerText = Math.ceil(count + increment);
        setTimeout(animateCounters, 1);
      } else {
        counter.innerText = target;
      }
    });
  };

  // 使用Intersection Observer检测元素是否可见
  var observerOptions = {
    threshold: 0.5
  };
  var observer = new IntersectionObserver(function (entries) {
    entries.forEach(function (entry) {
      if (entry.isIntersecting) {
        animateCounters();
        observer.unobserve(entry.target);
      }
    });
  }, observerOptions);
  if (counters.length > 0) {
    observer.observe(counters[0].parentElement.parentElement);
  }

  // 证件照上传处理
  window.handlePhotoUpload = function(input) {
    const file = input.files[0];
    if (!file) return;

    // 验证文件
    if (!window.fileUploader.isValidImage(file)) {
      alert('请选择有效的图片文件（JPG、PNG、GIF、WebP格式）');
      input.value = '';
      return;
    }

    if (file.size > 5 * 1024 * 1024) {
      alert('文件大小不能超过5MB');
      input.value = '';
      return;
    }

    // 预览图片
    const previewDiv = document.getElementById('photo-preview');
    const previewImg = document.getElementById('photo-preview-img');
    window.fileUploader.previewImage(file, previewImg);
    previewDiv.classList.remove('hidden');
  };

  // 删除证件照
  window.removePhoto = function() {
    const input = document.getElementById('photo');
    const previewDiv = document.getElementById('photo-preview');
    if (input) input.value = '';
    if (previewDiv) previewDiv.classList.add('hidden');
  };

  // 安全关闭成功弹窗
  window.closeSuccessModal = function() {
    const modal = document.querySelector('.fixed.inset-0.bg-black.bg-opacity-50');
    if (modal && modal.parentNode) {
      modal.parentNode.removeChild(modal);
    }
  };

  // 用户认证相关变量 - 移除重复定义，使用全局变量

  // 页面加载时检查登录状态
  document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM加载完成，开始检查认证状态');
    // 延迟一点时间确保Supabase客户端已初始化
    setTimeout(() => {
      checkAuthStatus();
    }, 100);
  });

      // 检查认证状态
    async function checkAuthStatus() {
      try {
        console.log('开始检查认证状态...');
        
        // 检查localStorage中的会话信息
        const session = localStorage.getItem('sb-ulknatpzvxuxeafdvzos-auth-token');
        console.log('localStorage中的会话信息:', session ? '存在' : '不存在');
        
        const { data: { user } } = await window.supabase.auth.getUser();
        console.log('获取到的用户信息:', user);
        
        if (user) {
          console.log('用户已登录:', user.email);
          currentUser = user;
          window.currentUser = user; // 确保全局可访问
          showUserInfo();
          
          // 检查是否已完善个人中心信息
          if (!user.user_metadata || !user.user_metadata.name) {
            console.log('用户未完善个人中心信息，显示提示');
            showLoginRequired();
            // 显示提示信息
            const loginRequiredSection = document.getElementById('login-required-section');
            if (loginRequiredSection) {
              loginRequiredSection.innerHTML = `
                <div class="text-center max-w-md">
                  <div class="mb-8">
                    <i class="fas fa-user-edit text-6xl text-blue-500 mb-6"></i>
                    <h3 class="text-3xl font-bold text-gray-800 mb-4">完善个人信息</h3>
                    <p class="text-gray-600 text-lg">请先完善个人中心信息，然后才能进行报名</p>
                  </div>
                  <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="profile.html" class="bg-primary hover:bg-primary/90 text-white font-bold py-3 px-8 rounded-lg transition-colors shadow-lg hover:shadow-xl">
                      去完善信息
                    </a>
                  </div>
                </div>
              `;
            }
          } else {
            // 异步检查用户详细信息
            checkUserProfileAndShowForm();
          }
          
          // 延迟一点时间再检查通知，确保currentUser已设置
          setTimeout(async () => {
            // 检查邀请码通知
            await checkInvitationNotifications();
            
            // 检查项目邀请通知
            await checkProjectNotifications();
          }, 100);
          
        } else {
          console.log('用户未登录，显示登录按钮');
          showLoginButtons();
          showLoginRequired();
        }
      } catch (error) {
        console.error('检查认证状态失败:', error);
        showLoginButtons();
        showLoginRequired();
      }
    }

  // 显示用户信息
  function showUserInfo() {
    document.getElementById('user-actions').classList.add('hidden');
    document.getElementById('user-info').classList.remove('hidden');
    document.getElementById('mobile-user-actions').classList.add('hidden');
    document.getElementById('mobile-user-info').classList.remove('hidden');
    
    const userName = currentUser.user_metadata?.name || currentUser.email;
    document.getElementById('user-name').textContent = userName;
    document.getElementById('mobile-user-name').textContent = userName;
    
    // 检查用户权限，只对管理员显示管理后台链接
    const adminLink = document.getElementById('admin-link');
    const mobileAdminLink = document.getElementById('mobile-admin-link');
    
    if (currentUser.email === 'admin@tyjk.com') {
      if (adminLink) adminLink.classList.remove('hidden');
      if (mobileAdminLink) mobileAdminLink.classList.remove('hidden');
    } else {
      if (adminLink) adminLink.classList.add('hidden');
      if (mobileAdminLink) mobileAdminLink.classList.add('hidden');
    }
  }

  // 显示登录按钮
  function showLoginButtons() {
    // 桌面端
    document.getElementById('user-actions').classList.remove('hidden');
    document.getElementById('user-info').classList.add('hidden');
    
    // 移动端
    document.getElementById('mobile-user-actions').classList.remove('hidden');
    document.getElementById('mobile-user-info').classList.add('hidden');
  }

  // 显示需要登录的提示
  function showLoginRequired() {
    document.getElementById('login-required-section').classList.remove('hidden');
    document.getElementById('application-form-section').classList.add('hidden');
  }

      // 检查用户详细信息并显示报名表单
    async function checkUserProfileAndShowForm() {
      try {
        const { data: userProfile, error } = await window.supabase
          .from('user_profiles')
          .select('*')
          .eq('user_id', currentUser.id)
          .single();
        
        if (error || !userProfile) {
          console.log('用户未完善个人中心信息，显示提示');
          showLoginRequired();
          // 显示提示信息
          const loginRequiredSection = document.getElementById('login-required-section');
          if (loginRequiredSection) {
            loginRequiredSection.innerHTML = `
              <div class="text-center max-w-md">
                <div class="mb-8">
                  <i class="fas fa-user-edit text-6xl text-blue-500 mb-6"></i>
                  <h3 class="text-3xl font-bold text-gray-800 mb-4">完善个人信息</h3>
                  <p class="text-gray-600 text-lg">请先完善个人中心信息，然后才能进行报名</p>
                </div>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                  <a href="profile.html" class="bg-primary hover:bg-primary/90 text-white font-bold py-3 px-8 rounded-lg transition-colors shadow-lg hover:shadow-xl">
                    去完善信息
                  </a>
                </div>
              </div>
            `;
          }
          return;
        }
        
        // 检查必要字段是否已填写
        const requiredFields = ['student_id', 'major', 'phone'];
        const missingFields = requiredFields.filter(field => !userProfile[field] || userProfile[field].trim() === '');
        
        if (missingFields.length > 0) {
          console.log('用户信息不完整，显示提示');
          showLoginRequired();
          // 显示提示信息
          const loginRequiredSection = document.getElementById('login-required-section');
          if (loginRequiredSection) {
            const fieldNames = {
              'student_id': '学号',
              'major': '专业',
              'phone': '手机号'
            };
            loginRequiredSection.innerHTML = `
              <div class="text-center max-w-md">
                <div class="mb-8">
                  <i class="fas fa-user-edit text-6xl text-blue-500 mb-6"></i>
                  <h3 class="text-3xl font-bold text-gray-800 mb-4">完善个人信息</h3>
                  <p class="text-gray-600 text-lg">请先完善个人中心信息：${missingFields.map(f => fieldNames[f]).join('、')}</p>
                </div>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                  <a href="profile.html" class="bg-primary hover:bg-primary/90 text-white font-bold py-3 px-8 rounded-lg transition-colors shadow-lg hover:shadow-xl">
                    去完善信息
                  </a>
                </div>
              </div>
            `;
          }
          return;
        }
        
        // 所有检查通过，显示报名表单
        showApplicationForm();
      } catch (error) {
        console.error('检查用户信息失败:', error);
        showLoginRequired();
        // 显示提示信息
        const loginRequiredSection = document.getElementById('login-required-section');
        if (loginRequiredSection) {
          loginRequiredSection.innerHTML = `
            <div class="text-center max-w-md">
              <div class="mb-8">
                <i class="fas fa-user-edit text-6xl text-blue-500 mb-6"></i>
                <h3 class="text-3xl font-bold text-gray-800 mb-4">完善个人信息</h3>
                <p class="text-gray-600 text-lg">请先完善个人中心信息，然后才能进行报名</p>
              </div>
              <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="profile.html" class="bg-primary hover:bg-primary/90 text-white font-bold py-3 px-8 rounded-lg transition-colors shadow-lg hover:shadow-xl">
                  去完善信息
                </a>
              </div>
            </div>
          `;
        }
      }
    }

    // 显示报名表单
    async function showApplicationForm() {
    // 检查是否已完善个人中心信息
    if (!currentUser.user_metadata || !currentUser.user_metadata.name) {
      alert('请先完善个人中心信息后再进行报名！');
      // 跳转到个人中心页面
      window.location.href = 'profile.html';
      return;
    }

    // 检查用户是否已完善个人中心的基本信息
    try {
      const { data: userProfile, error } = await window.supabase
        .from('user_profiles')
        .select('*')
        .eq('user_id', currentUser.id)
        .single();
      
      if (error || !userProfile) {
        alert('请先完善个人中心信息后再进行报名！');
        window.location.href = 'profile.html';
        return;
      }
      
      // 检查必要字段是否已填写
      const requiredFields = ['student_id', 'major', 'phone'];
      const missingFields = requiredFields.filter(field => !userProfile[field] || userProfile[field].trim() === '');
      
      if (missingFields.length > 0) {
        const fieldNames = {
          'student_id': '学号',
          'major': '专业',
          'phone': '手机号'
        };
        alert(`请先完善个人中心信息：${missingFields.map(f => fieldNames[f]).join('、')}`);
        window.location.href = 'profile.html';
        return;
      }
      
      // 所有检查通过，显示报名表单
      document.getElementById('login-required-section').classList.add('hidden');
      document.getElementById('application-form-section').classList.remove('hidden');
    } catch (error) {
      console.error('检查用户信息失败:', error);
      alert('请先完善个人中心信息后再进行报名！');
      window.location.href = 'profile.html';
      return;
    }
  }

  // 模态框显示/隐藏函数
  function showLoginModal() {
    console.log('显示登录模态框');
    const modal = document.getElementById('login-modal');
    if (modal) {
      modal.classList.remove('hidden');
    } else {
      console.error('找不到登录模态框元素');
    }
  }

      function closeLoginModal() {
      console.log('隐藏登录模态框');
      const modal = document.getElementById('login-modal');
      if (modal) {
        modal.classList.add('hidden');
      }
      // 清除错误信息
      const errorElement = document.getElementById('login-error');
      if (errorElement) {
        errorElement.classList.add('hidden');
      }
    }

  function showRegisterModal() {
    console.log('显示注册模态框');
    const modal = document.getElementById('register-modal');
    if (modal) {
      modal.classList.remove('hidden');
    } else {
      console.error('找不到注册模态框元素');
    }
  }

  function hideRegisterModal() {
    console.log('隐藏注册模态框');
    const modal = document.getElementById('register-modal');
    if (modal) {
      modal.classList.add('hidden');
    }
  }

      // 将函数添加到全局作用域
    window.showLoginModal = showLoginModal;
    window.closeLoginModal = closeLoginModal;
    window.showRegisterModal = showRegisterModal;
    window.closeRegisterModal = closeRegisterModal;
    window.checkAuthStatus = checkAuthStatus; // 添加调试函数

  // 登录处理
  document.getElementById('login-form').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const email = document.getElementById('login-email').value;
    const password = document.getElementById('login-password').value;
    const rememberMe = document.getElementById('remember-me').checked;
    
    try {
      console.log('开始登录:', email, '记住我:', rememberMe);
      
      // 根据"记住我"复选框设置会话持久化
      const { data, error } = await window.supabase.auth.signInWithPassword({
        email: email,
        password: password
      });
      
      if (error) {
        console.error('登录失败:', error);
        document.getElementById('login-error').textContent = error.message;
        document.getElementById('login-error').classList.remove('hidden');
      } else {
        console.log('登录成功:', data.user.email);
        currentUser = data.user;
        hideLoginModal();
        // 登录成功后跳转到个人中心
        window.location.href = 'profile.html';
      }
    } catch (error) {
      console.error('登录异常:', error);
      document.getElementById('login-error').textContent = '登录失败，请稍后重试';
      document.getElementById('login-error').classList.remove('hidden');
    }
  });

  // 注册处理
  document.getElementById('register-form').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const name = document.getElementById('register-name').value;
    const email = document.getElementById('register-email').value;
    const password = document.getElementById('register-password').value;
    const confirmPassword = document.getElementById('register-confirm-password').value;

    if (password !== confirmPassword) {
      alert('两次输入的密码不一致');
      return;
    }

    if (password.length < 6) {
      alert('密码长度至少6位');
      return;
    }

    try {
      const { data, error } = await window.supabase.auth.signUp({
        email: email,
        password: password,
        options: {
          data: {
            name: name
          },
          emailRedirectTo: window.location.origin + '/email-verification.html'
        }
      });

      if (error) throw error;

      alert('注册成功！请检查邮箱验证邮件。验证完成后即可登录。');
      hideRegisterModal();
      showLoginModal();
      
      // 清空表单
      document.getElementById('register-form').reset();
      
    } catch (error) {
      alert('注册失败：' + error.message);
    }
  });

  // 退出登录
  function handleLogout() {
    window.supabase.auth.signOut().then(() => {
      currentUser = null;
      showLoginButtons();
      showLoginRequired();
    });
  }

  // 表单提交处理（需要登录）
  var recruitmentForm = document.getElementById('recruitment-form');
  if (recruitmentForm) {
    recruitmentForm.addEventListener('submit', async function (e) {
      e.preventDefault();

      // 检查是否已登录
      if (!currentUser) {
        alert('请先登录');
        showLoginModal();
        return;
      }

      // 检查是否已完善个人中心信息
      if (!currentUser.user_metadata || !currentUser.user_metadata.name) {
        alert('请先完善个人中心信息后再进行报名！');
        // 跳转到个人中心页面
        window.location.href = 'profile.html';
        return;
      }

      // 检查用户是否已完善个人中心的基本信息
      try {
        const { data: userProfile, error } = await window.supabase
          .from('user_profiles')
          .select('*')
          .eq('user_id', currentUser.id)
          .single();
        
        if (error || !userProfile) {
          alert('请先完善个人中心信息后再进行报名！');
          window.location.href = 'profile.html';
          return;
        }
        
        // 检查必要字段是否已填写
        const requiredFields = ['student_id', 'major', 'phone'];
        const missingFields = requiredFields.filter(field => !userProfile[field] || userProfile[field].trim() === '');
        
        if (missingFields.length > 0) {
          const fieldNames = {
            'student_id': '学号',
            'major': '专业',
            'phone': '手机号'
          };
          alert(`请先完善个人中心信息：${missingFields.map(f => fieldNames[f]).join('、')}`);
          window.location.href = 'profile.html';
          return;
        }
      } catch (error) {
        console.error('检查用户信息失败:', error);
        alert('请先完善个人中心信息后再进行报名！');
        window.location.href = 'profile.html';
        return;
      }

      // 获取表单数据并去除空格
      const formData = new FormData(recruitmentForm);
      const applicationData = {
        name: formData.get('name')?.trim() || '',
        student_id: formData.get('student_id')?.trim() || '',
        major: formData.get('major')?.trim() || '',
        email: formData.get('email')?.trim() || '',
        phone: formData.get('phone')?.trim() || '',
        department: formData.get('department')?.trim() || '',
        skills: formData.get('skills')?.trim() || '',
        experience: formData.get('experience')?.trim() || '',
        motivation: formData.get('motivation')?.trim() || '',
        status: 'pending',
        user_id: currentUser.id // 添加用户ID
      };

      // 表单验证
      const missingFields = [];
      if (!applicationData.name) missingFields.push('姓名');
      if (!applicationData.student_id) missingFields.push('学号');
      if (!applicationData.email) missingFields.push('邮箱');
      if (!applicationData.phone) missingFields.push('手机号');
      if (!applicationData.major) missingFields.push('专业');
      if (!applicationData.department) missingFields.push('意向部门');
      if (!applicationData.skills) missingFields.push('掌握技能');
      if (!applicationData.motivation) missingFields.push('加入动机');

      if (missingFields.length > 0) {
        alert(`请填写必填字段：${missingFields.join('、')}`);
        return;
      }

      // 检查证件照
      const photoFile = formData.get('photo');
      if (!photoFile || photoFile.size === 0) {
        alert('请上传证件照');
        return;
      }

      // 显示加载状态
      const submitBtn = recruitmentForm.querySelector('button[type="submit"]');
      const originalText = submitBtn.textContent;
      submitBtn.textContent = '提交中...';
      submitBtn.disabled = true;
      // 新增loading遮罩
      let loadingMask = document.createElement('div');
      loadingMask.id = 'form-loading-mask';
      loadingMask.style = 'position:fixed;z-index:9999;top:0;left:0;width:100vw;height:100vh;background:rgba(255,255,255,0.6);display:flex;align-items:center;justify-content:center;';
      loadingMask.innerHTML = '<div class="animate-spin rounded-full h-12 w-12 border-t-4 border-blue-500 border-solid mx-auto"></div>';
      document.body.appendChild(loadingMask);

      try {
        console.log('开始提交报名表单...');
        console.log('表单数据:', applicationData);
        
        // 先上传证件照
        console.log('开始上传证件照...');
        const photoUploadResult = await window.fileUploader.uploadImage(photoFile, 'applications');
        console.log('证件照上传结果:', photoUploadResult);
        
        if (!photoUploadResult.success) {
          alert('证件照上传失败：' + photoUploadResult.error);
          return;
        }

        // 添加证件照URL到报名数据
        applicationData.photo_url = photoUploadResult.path;
        console.log('添加证件照URL后的数据:', applicationData);

        // 提交到Supabase
        console.log('开始提交到Supabase...');
        const result = await submitApplication(applicationData);
        console.log('Supabase提交结果:', result);
        
        if (result.success) {
          // 创建成功提示弹窗
          const successModal = document.createElement('div');
          successModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
          successModal.innerHTML = `
            <div class="bg-white rounded-lg p-8 max-w-md mx-4 text-center">
              <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-check text-green-600 text-2xl"></i>
              </div>
              <h3 class="text-xl font-bold text-gray-800 mb-2">报名成功！</h3>
              <p class="text-gray-600 mb-6">您的报名信息已成功提交，我们会尽快审核并联系您，请保持手机畅通。</p>
              <div class="bg-blue-50 p-4 rounded-lg mb-6 text-left">
                <p class="text-sm text-blue-800 mb-2"><strong>温馨提示：</strong></p>
                <ul class="text-sm text-blue-700 space-y-1">
                  <li>• 我们会在3-5个工作日内完成审核</li>
                  <li>• 审核结果将通过短信和邮箱通知</li>
                  <li>• 如有疑问，请联系：767997302@qq.com</li>
                  <li>• 联系电话：18532206167</li>
                </ul>
              </div>
              <button onclick="closeSuccessModal()" class="bg-primary hover:bg-primary/90 text-white px-6 py-2 rounded-lg transition-colors">确定</button>
            </div>
          `;
          document.body.appendChild(successModal);
          
          // 重置表单
          recruitmentForm.reset();
          // 清除证件照预览
          const photoPreview = document.getElementById('photo-preview');
          if (photoPreview) {
            photoPreview.classList.add('hidden');
          }
        } else {
          // 检查是否是学号重复错误
          if (result.error && result.error.includes('duplicate key value violates unique constraint "applications_student_id_key"')) {
            alert('提交失败：该学号已经提交过报名申请，请检查学号是否正确，或联系管理员处理。');
          } else {
            alert('提交失败：' + result.error);
          }
        }
      } catch (error) {
        console.error('提交异常:', error);
        alert('提交失败，请稍后重试');
      } finally {
        // 恢复按钮状态
        submitBtn.textContent = originalText;
        submitBtn.disabled = false;
        // 移除loading遮罩
        const mask = document.getElementById('form-loading-mask');
        if (mask) mask.remove();
      }
    });
  }
});


  </script>
  
  <!-- 登录模态框 -->
  <div id="login-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white rounded-lg shadow-xl max-w-md w-full">
        <div class="p-6">
          <div class="flex justify-between items-center mb-6">
            <h3 class="text-xl font-bold text-gray-800">登录</h3>
            <button onclick="closeLoginModal()" class="text-gray-400 hover:text-gray-600">
              <i class="fas fa-times text-xl"></i>
            </button>
          </div>
          <form id="login-form" class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">邮箱</label>
              <input type="email" id="login-email" required 
                     class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">密码</label>
              <input type="password" id="login-password" required 
                     class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary">
            </div>
            <button type="submit" 
                    class="w-full bg-primary text-white py-2 px-4 rounded-md hover:bg-primary/90 transition-colors">
              登录
            </button>
          </form>
          <div id="login-error" class="mt-4 text-red-600 text-sm hidden"></div>
          <div class="mt-4 text-center">
            <span class="text-gray-600">还没有账号？</span>
            <button onclick="showRegisterModal()" class="text-primary hover:text-primary/80 font-medium">立即注册</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 注册模态框 -->
  <div id="register-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white rounded-lg shadow-xl max-w-md w-full">
        <div class="p-6">
          <div class="flex justify-between items-center mb-6">
            <h3 class="text-xl font-bold text-gray-800">注册</h3>
            <button onclick="closeRegisterModal()" class="text-gray-400 hover:text-gray-600">
              <i class="fas fa-times text-xl"></i>
            </button>
          </div>
          <form id="register-form" class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">姓名</label>
              <input type="text" id="register-name" required 
                     class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">邮箱</label>
              <input type="email" id="register-email" required 
                     class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">密码</label>
              <input type="password" id="register-password" required 
                     class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">确认密码</label>
              <input type="password" id="register-confirm-password" required 
                     class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary">
            </div>
            <button type="submit" 
                    class="w-full bg-primary text-white py-2 px-4 rounded-md hover:bg-primary/90 transition-colors">
              注册
            </button>
          </form>
          <div id="register-error" class="mt-4 text-red-600 text-sm hidden"></div>
          <div class="mt-4 text-center">
            <span class="text-gray-600">已有账号？</span>
            <button onclick="showLoginModal()" class="text-primary hover:text-primary/80 font-medium">立即登录</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // 全局变量 - 确保只有一个currentUser定义

    // 页面加载时检查认证状态
    document.addEventListener('DOMContentLoaded', function() {
      checkAuthStatus();
      setupAuthEventListeners();
    });

    // 检查认证状态
    async function checkAuthStatus() {
      try {
        const { data: { user } } = await window.supabase.auth.getUser();
        if (user) {
          currentUser = user;
          window.currentUser = user; // 确保全局可访问
          showUserInfo();
          showApplicationForm();
          
          // 检查邀请码通知
          await checkInvitationNotifications();
          
          // 检查项目邀请通知
          await checkProjectNotifications();
          

        } else {
          showLoginButtons();
          showLoginRequired();
        }
      } catch (error) {
        console.error('检查认证状态失败:', error);
        showLoginButtons();
        showLoginRequired();
      }
    }

    // 显示用户信息
    function showUserInfo() {
      document.getElementById('user-actions').classList.add('hidden');
      document.getElementById('user-info').classList.remove('hidden');
      document.getElementById('mobile-user-actions').classList.add('hidden');
      document.getElementById('mobile-user-info').classList.remove('hidden');
      
      const userName = currentUser.user_metadata?.name || currentUser.email;
      document.getElementById('user-name').textContent = userName;
      document.getElementById('mobile-user-name').textContent = userName;
    }

    // 检查邀请码通知
    async function checkInvitationNotifications() {
      try {
        console.log('检查邀请码通知...');
        
        // 确保currentUser存在且有id
        if (!currentUser || !currentUser.id) {
          console.log('currentUser不存在或没有id，跳过邀请码检查');
          return;
        }
        
        // 查询当前用户的邀请码
        const { data: invitations, error } = await window.supabase
          .from('user_invitation_codes')
          .select('*')
          .eq('user_id', currentUser.id)
          .eq('status', 'active')
          .order('created_at', { ascending: false });
        
        if (error) {
          console.error('检查邀请码通知失败:', error);
          return;
        }
        
        if (invitations && invitations.length > 0) {
          // 显示邀请码通知横幅
          showInvitationNotificationBanner(invitations[0]);
        }
        
      } catch (error) {
        console.error('检查邀请码通知失败:', error);
      }
    }

    // 检查项目邀请通知
    async function checkProjectNotifications() {
      try {
        console.log('检查项目邀请通知...');
        
        // 确保currentUser存在且有id
        if (!currentUser || !currentUser.id) {
          console.log('currentUser不存在或没有id，跳过项目邀请检查');
          return;
        }
        
        // 查询当前用户的待处理项目邀请
        const { data: invitations, error } = await window.supabase
          .from('project_invitations')
          .select('*')
          .eq('invitee_id', currentUser.id)
          .eq('status', 'pending');
        
        if (error) {
          console.error('检查项目邀请通知失败:', error);
          return;
        }
        
        // 检查本地存储的已读状态
        const readInvitations = JSON.parse(localStorage.getItem('readProjectInvitations') || '[]');
        const unreadInvitations = invitations.filter(inv => {
          const readRecord = readInvitations.find(ri => 
            ri.invitation_id === inv.id && 
            new Date(ri.read_at) > new Date(inv.created_at)
          );
          return !readRecord;
        });
        
        if (unreadInvitations && unreadInvitations.length > 0) {
          // 显示红点通知
          showProjectNotificationDot(unreadInvitations.length);
        } else {
          // 隐藏红点通知
          hideProjectNotificationDot();
        }
        
      } catch (error) {
        console.error('检查项目邀请通知失败:', error);
      }
    }

    // 显示项目邀请红点通知
    function showProjectNotificationDot(count) {
      const desktopDot = document.getElementById('project-notification-dot');
      const mobileDot = document.getElementById('mobile-project-notification-dot');
      
      if (desktopDot) {
        desktopDot.classList.remove('hidden');
        if (count > 0) {
          desktopDot.textContent = count > 9 ? '9+' : count;
          desktopDot.className = 'absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full text-white text-xs flex items-center justify-center';
        }
      }
      
      if (mobileDot) {
        mobileDot.classList.remove('hidden');
        if (count > 0) {
          mobileDot.textContent = count > 9 ? '9+' : count;
          mobileDot.className = 'absolute top-2 right-2 w-3 h-3 bg-red-500 rounded-full text-white text-xs flex items-center justify-center';
        }
      }
    }

    // 隐藏项目邀请红点通知
    function hideProjectNotificationDot() {
      const desktopDot = document.getElementById('project-notification-dot');
      const mobileDot = document.getElementById('mobile-project-notification-dot');
      
      if (desktopDot) {
        desktopDot.classList.add('hidden');
      }
      
      if (mobileDot) {
        mobileDot.classList.add('hidden');
      }
    }

    // 标记项目邀请为已读
    function markProjectInvitationAsRead(invitationId) {
      try {
        const readInvitations = JSON.parse(localStorage.getItem('readProjectInvitations') || '[]');
        readInvitations.push({
          invitation_id: invitationId,
          read_at: new Date().toISOString()
        });
        localStorage.setItem('readProjectInvitations', JSON.stringify(readInvitations));
        
        // 重新检查通知状态
        checkProjectNotifications();
      } catch (error) {
        console.error('标记项目邀请已读失败:', error);
      }
    }

    // 标记所有项目邀请为已读
    function markAllProjectInvitationsAsRead() {
      try {
        const readInvitations = JSON.parse(localStorage.getItem('readProjectInvitations') || '[]');
        const currentTime = new Date().toISOString();
        
        // 获取所有待处理的邀请ID
        window.supabase
          .from('project_invitations')
          .select('id')
          .eq('invitee_id', currentUser.id)
          .eq('status', 'pending')
          .then(({ data: invitations }) => {
            if (invitations) {
              invitations.forEach(inv => {
                readInvitations.push({
                  invitation_id: inv.id,
                  read_at: currentTime
                });
              });
              localStorage.setItem('readProjectInvitations', JSON.stringify(readInvitations));
              checkProjectNotifications();
            }
          });
      } catch (error) {
        console.error('标记所有项目邀请已读失败:', error);
      }
    }

    // 显示邀请码通知横幅
    function showInvitationNotificationBanner(invitation) {
      // 移除已存在的通知横幅
      const existingBanner = document.getElementById('invitation-notification-banner');
      if (existingBanner) {
        existingBanner.remove();
      }
      
      const banner = document.createElement('div');
      banner.id = 'invitation-notification-banner';
      banner.className = 'fixed top-16 left-0 right-0 bg-gradient-to-r from-yellow-400 to-orange-400 text-white z-50 shadow-lg';
      
      const expiresDate = new Date(invitation.expires_at).toLocaleDateString('zh-CN');
      
      banner.innerHTML = `
        <div class="container mx-auto px-4 py-3">
          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <i class="fas fa-key mr-3 text-xl"></i>
              <div>
                <div class="font-semibold">您有新的项目管理邀请码！</div>
                <div class="text-sm opacity-90">邀请码: <code class="bg-white/20 px-2 py-1 rounded">${invitation.invitation_code}</code> | 有效期至: ${expiresDate}</div>
              </div>
            </div>
            <div class="flex items-center space-x-3">
              <button onclick="useInvitationCodeNow('${invitation.invitation_code}')" class="bg-white text-orange-600 px-4 py-2 rounded-lg font-medium hover:bg-gray-100 transition-colors">
                立即使用
              </button>
              <button onclick="closeInvitationBanner()" class="text-white hover:text-gray-200">
                <i class="fas fa-times"></i>
              </button>
            </div>
          </div>
        </div>
      `;
      
      document.body.appendChild(banner);
      
      // 5秒后自动隐藏
      setTimeout(() => {
        if (banner.parentNode) {
          banner.style.opacity = '0';
          banner.style.transform = 'translateY(-100%)';
          banner.style.transition = 'all 0.3s ease';
          setTimeout(() => {
            if (banner.parentNode) {
              banner.remove();
            }
          }, 300);
        }
      }, 5000);
    }

    // 立即使用邀请码
    function useInvitationCodeNow(code) {
      closeInvitationBanner();
      showInvitationCodeModal(code);
    }

    // 关闭邀请码横幅
    function closeInvitationBanner() {
      const banner = document.getElementById('invitation-notification-banner');
      if (banner) {
        banner.remove();
      }
    }



    // 显示登录按钮
    function showLoginButtons() {
      document.getElementById('user-actions').classList.remove('hidden');
      document.getElementById('user-info').classList.add('hidden');
      document.getElementById('mobile-user-actions').classList.remove('hidden');
      document.getElementById('mobile-user-info').classList.add('hidden');
    }

    // 显示报名表单
    function showApplicationForm() {
      document.getElementById('login-required-section').classList.add('hidden');
      document.getElementById('application-form-section').classList.remove('hidden');
    }

    // 显示登录提示
    function showLoginRequired() {
      document.getElementById('login-required-section').classList.remove('hidden');
      document.getElementById('application-form-section').classList.add('hidden');
    }

    // 模态框函数
    function showLoginModal() {
      console.log('显示登录模态框');
      document.getElementById('login-modal').classList.remove('hidden');
    }

    function closeLoginModal() {
      document.getElementById('login-modal').classList.add('hidden');
      document.getElementById('login-error').classList.add('hidden');
    }

    function showRegisterModal() {
      console.log('显示注册模态框');
      document.getElementById('register-modal').classList.remove('hidden');
    }

    function closeRegisterModal() {
      document.getElementById('register-modal').classList.add('hidden');
      document.getElementById('register-error').classList.add('hidden');
    }

    // 设置认证事件监听器
    function setupAuthEventListeners() {
      // 登录表单提交
      document.getElementById('login-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const email = document.getElementById('login-email').value;
        const password = document.getElementById('login-password').value;
        const rememberMe = document.getElementById('remember-me').checked;
        
        try {
          // 根据"记住我"复选框设置会话持久化
          const { data, error } = await window.supabase.auth.signInWithPassword({
            email: email,
            password: password
          }, {
            persistSession: rememberMe
          });
          
          if (error) {
            document.getElementById('login-error').textContent = error.message;
            document.getElementById('login-error').classList.remove('hidden');
          } else {
            console.log('登录成功:', data.user.email);
            currentUser = data.user;
            closeLoginModal();
            // 登录成功后自动跳转到个人中心
            setTimeout(() => {
              window.location.href = 'profile.html';
            }, 1000);
          }
        } catch (error) {
          console.error('登录失败:', error);
          document.getElementById('login-error').textContent = '登录失败，请稍后重试';
          document.getElementById('login-error').classList.remove('hidden');
        }
      });

      // 注册表单提交
      document.getElementById('register-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const name = document.getElementById('register-name').value;
        const email = document.getElementById('register-email').value;
        const password = document.getElementById('register-password').value;
        const confirmPassword = document.getElementById('register-confirm-password').value;
        
        if (password !== confirmPassword) {
          document.getElementById('register-error').textContent = '两次输入的密码不一致';
          document.getElementById('register-error').classList.remove('hidden');
          return;
        }
        
        try {
          const { data, error } = await window.supabase.auth.signUp({
            email: email,
            password: password,
            options: {
              data: { name: name },
              emailRedirectTo: window.location.origin + '/email-verification.html'
            }
          });
          
                if (error) {
        document.getElementById('register-error').textContent = error.message;
        document.getElementById('register-error').classList.remove('hidden');
      } else {
        closeRegisterModal();
        alert('注册成功！正在跳转到个人中心...');
        // 注册成功后自动跳转到个人中心
        setTimeout(() => {
          window.location.href = 'profile.html';
        }, 1500);
      }
        } catch (error) {
          console.error('注册失败:', error);
          document.getElementById('register-error').textContent = '注册失败，请稍后重试';
          document.getElementById('register-error').classList.remove('hidden');
        }
      });
    }

    // 退出登录
    async function handleLogout() {
      try {
        await window.supabase.auth.signOut();
        currentUser = null;
        showLoginButtons();
        showLoginRequired();
      } catch (error) {
        console.error('退出登录失败:', error);
      }
    }

    // 关闭成功弹窗
    window.closeSuccessModal = function() {
      const modal = document.querySelector('.fixed.inset-0.bg-black.bg-opacity-50');
      if (modal && modal.parentNode) {
        modal.parentNode.removeChild(modal);
      }
    };

    // 添加到全局作用域
    window.showLoginModal = showLoginModal;
    window.closeLoginModal = closeLoginModal;
    window.showRegisterModal = showRegisterModal;
    window.closeRegisterModal = closeRegisterModal;
    window.handleLogout = handleLogout;

    // ==================== 项目管理功能 ====================
    
    // 全局变量
    let userProjects = [];
    let userInvitationCode = null;
    let hasProjectAccess = false;

    // 显示项目管理入口
    window.showProjectManagement = async function() {
      console.log('显示项目管理入口');
      console.log('currentUser状态:', currentUser);
      console.log('window.currentUser状态:', window.currentUser);
      
      // 检查用户是否已登录
      if (!currentUser) {
        console.log('currentUser为空，尝试从window获取');
        if (window.currentUser) {
          currentUser = window.currentUser;
        } else {
          console.log('window.currentUser也为空，提示登录');
          alert('请先登录');
          return;
        }
      }

      // 检查 localStorage 中的持久化验证状态
      const savedAccess = localStorage.getItem('hasProjectAccess');
      const savedCode = localStorage.getItem('userInvitationCode');
      const accessTime = localStorage.getItem('projectAccessTime');
      
      // 如果本地有验证记录，检查是否仍然有效
      if (savedAccess === 'true' && savedCode) {
        console.log('检测到本地验证记录:', { savedCode, accessTime });
        
        // 验证邀请码是否仍然有效
        try {
          const isValid = await verifyStoredInvitationCode(savedCode);
          if (isValid) {
            console.log('本地验证记录有效，直接跳转');
            window.hasProjectAccess = true;
            window.userInvitationCode = savedCode;
            // 标记所有项目邀请为已读
            markAllProjectInvitationsAsRead();
            window.location.href = 'project-management.html';
            return;
          } else {
            console.log('本地验证记录已失效，需要重新验证');
            clearStoredAccess();
            showInvitationCodeModal();
            return;
          }
        } catch (error) {
          console.error('验证本地记录失败:', error);
          clearStoredAccess();
          showInvitationCodeModal();
          return;
        }
      }

      // 检查内存中的验证状态
      if (hasProjectAccess && userInvitationCode) {
        console.log('用户已有项目管理权限，直接跳转到项目管理页面');
        // 标记所有项目邀请为已读
        markAllProjectInvitationsAsRead();
        window.location.href = 'project-management.html';
        return;
      }

      // 显示邀请码验证模态框
      showInvitationCodeModal();
    };

    // 显示邀请码验证模态框
    function showInvitationCodeModal(prefilledCode = '') {
      const modal = document.createElement('div');
      modal.id = 'invitation-code-modal';
      modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
      modal.innerHTML = `
        <div class="bg-white rounded-xl shadow-2xl max-w-md w-full mx-4">
          <div class="p-6">
            <div class="text-center mb-3">
              <i class="fas fa-key text-purple-600 text-4xl mb-4"></i>
              <h3 class="text-xl font-bold text-gray-800 mb-2">项目管理权限验证</h3>
              <p class="text-gray-600">请输入管理员发放的邀请码以访问项目管理功能</p>
            </div>
            
            <form id="invitation-code-form" class="space-y-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">邀请码</label>
                <input type="text" id="invitation-code-input" 
                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                       placeholder="请输入8位邀请码" maxlength="8" required value="${prefilledCode}">
              </div>
              
              <div class="flex space-x-3">
                <button type="button" onclick="closeInvitationCodeModal()" 
                        class="flex-1 px-4 py-2 text-gray-600 hover:text-gray-800 font-medium">
                  取消
                </button>
                <button type="submit" 
                        class="flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-medium">
                  验证邀请码
                </button>
              </div>
            </form>
            
            <div id="invitation-code-error" class="mt-4 text-red-600 text-sm hidden"></div>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
      
      // 绑定表单提交事件
      document.getElementById('invitation-code-form').addEventListener('submit', handleInvitationCodeSubmit);
    }

    // 处理邀请码验证
    async function handleInvitationCodeSubmit(e) {
      e.preventDefault();
      
      const code = document.getElementById('invitation-code-input').value.trim().toUpperCase();
      const errorElement = document.getElementById('invitation-code-error');
      
      if (!code) {
        showError('请输入邀请码');
        return;
      }
      
      try {
        // 验证邀请码
        console.log('开始验证邀请码:', code);
        console.log('当前用户ID:', currentUser.id);
        
        // 先查询 active 状态的邀请码（未使用的）
        let { data, error } = await window.supabase
          .from('user_invitation_codes')
          .select('*')
          .eq('invitation_code', code)
          .eq('status', 'active')
          .single();
        
        // 如果没找到 active 的，再查询 used 状态的（已使用但属于当前用户）
        if (error || !data) {
          console.log('未找到 active 状态的邀请码，尝试查询 used 状态...');
          const { data: usedData, error: usedError } = await window.supabase
            .from('user_invitation_codes')
            .select('*')
            .eq('invitation_code', code)
            .eq('status', 'used')
            .eq('user_id', currentUser.id)
            .single();
          
          if (usedError || !usedData) {
            console.log('也未找到 used 状态的邀请码');
            data = null;
            error = usedError;
          } else {
            console.log('找到已使用的邀请码，属于当前用户');
            data = usedData;
            error = null;
          }
        }
        
        console.log('邀请码查询结果:', { data, error });
        
        if (error) {
          console.error('邀请码查询错误:', error);
          showError('邀请码验证失败，请稍后重试');
          return;
        }
        
        if (!data) {
          showError('邀请码无效或已过期');
          return;
        }
        
        console.log('找到邀请码数据:', data);
        
        // 检查邀请码是否属于当前用户
        if (data.user_id && data.user_id !== currentUser.id) {
          console.log('用户ID不匹配:', { 
            invitation_user_id: data.user_id, 
            current_user_id: currentUser.id 
          });
          showError('此邀请码不属于当前用户');
          return;
        }
        
        // 如果邀请码未分配用户，说明是管理员发放的通用邀请码，允许使用
        if (!data.user_id) {
          console.log('检测到管理员发放的通用邀请码，允许使用');
        }
        
        // 如果是个人邀请码，验证用户匹配
        if (data.user_id && data.user_id === currentUser.id) {
          console.log('验证个人邀请码成功，用户匹配');
        }
        
        // 检查邀请码是否过期
        const now = new Date();
        const expiresAt = new Date(data.expires_at);
        console.log('时间检查:', { now, expiresAt, isExpired: expiresAt < now });
        
        if (expiresAt < now) {
          showError('邀请码已过期');
          return;
        }
        
        // 如果邀请码是 active 状态，则更新为 used 并绑定用户
        if (data.status === 'active') {
          const { error: updateError } = await window.supabase
            .from('user_invitation_codes')
            .update({ 
              status: 'used',
              used_at: new Date().toISOString(),
              user_id: currentUser.id  // 确保绑定到当前用户
            })
            .eq('id', data.id);
          
          if (updateError) {
            console.error('更新邀请码状态失败:', updateError);
            // 即使更新失败，也允许用户进入项目管理页面
            console.log('邀请码验证成功，但状态更新失败，继续进入项目管理页面');
          } else {
            console.log('邀请码状态已更新为已使用，并绑定到用户:', currentUser.id);
          }
        } else {
          console.log('邀请码已经是 used 状态，无需更新');
        }
        
        // 设置用户权限
        userInvitationCode = data;
        hasProjectAccess = true;
        
        // 关闭模态框并跳转到项目管理页面
        closeInvitationCodeModal();
        console.log('准备跳转到项目管理页面...');
        
        // 设置全局状态，记住用户已通过验证
        window.hasProjectAccess = true;
        window.userInvitationCode = data.invitation_code;
        
        // 将验证状态保存到 localStorage，实现持久化
        localStorage.setItem('hasProjectAccess', 'true');
        localStorage.setItem('userInvitationCode', data.invitation_code);
        localStorage.setItem('projectAccessTime', Date.now().toString());
        
        // 跳转到project-management.html
        window.location.href = 'project-management.html';
        
      } catch (error) {
        console.error('验证邀请码失败:', error);
        showError('验证失败，请稍后重试');
      }
    }

    // 验证存储的邀请码是否仍然有效
    async function verifyStoredInvitationCode(code) {
      try {
        const { data, error } = await window.supabase
          .from('user_invitation_codes')
          .select('*')
          .eq('invitation_code', code)
          .eq('status', 'used')  // 检查已使用的邀请码
          .single();
        
        if (error || !data) {
          console.log('存储的邀请码已失效:', error);
          return false;
        }
        
        // 检查邀请码是否属于当前用户
        if (data.user_id && data.user_id !== currentUser.id) {
          console.log('存储的邀请码不属于当前用户');
          return false;
        }
        
        // 检查是否过期
        const now = new Date();
        const expiresAt = new Date(data.expires_at);
        if (now > expiresAt) {
          console.log('存储的邀请码已过期');
          return false;
        }
        
        console.log('存储的邀请码仍然有效，属于当前用户');
        return true;
      } catch (error) {
        console.error('验证存储邀请码失败:', error);
        return false;
      }
    }

    // 清除存储的访问权限
    function clearStoredAccess() {
      localStorage.removeItem('hasProjectAccess');
      localStorage.removeItem('userInvitationCode');
      localStorage.removeItem('projectAccessTime');
      window.hasProjectAccess = false;
      window.userInvitationCode = null;
      console.log('已清除存储的访问权限');
    }

    // 显示错误信息
    function showError(message) {
      const errorElement = document.getElementById('invitation-code-error');
      if (errorElement) {
        errorElement.textContent = message;
        errorElement.classList.remove('hidden');
      } else {
        console.error('错误元素未找到，无法显示错误信息:', message);
        // 使用alert作为备用方案
        alert('错误: ' + message);
      }
    }

    // 关闭邀请码模态框
    window.closeInvitationCodeModal = function() {
      const modal = document.getElementById('invitation-code-modal');
      if (modal) {
        modal.remove();
      }
    };

    // 显示项目管理页面
    function showProjectManagementPage() {
      console.log('开始显示项目管理页面...');
      
      // 隐藏主页面内容 - 隐藏所有 section 元素
      const sections = document.querySelectorAll('section');
      if (sections.length > 0) {
        console.log('隐藏主页面内容，找到', sections.length, '个section元素');
        sections.forEach(section => {
          section.style.display = 'none';
        });
      } else {
        console.log('未找到主页面内容');
      }
      
      // 检查是否已存在项目管理页面
      const existingPage = document.getElementById('project-management-page');
      if (existingPage) {
        console.log('移除已存在的项目管理页面');
        existingPage.remove();
      }
      
      // 创建项目管理页面
      const projectPage = document.createElement('div');
      projectPage.id = 'project-management-page';
      projectPage.className = 'min-h-screen bg-gray-50';
      console.log('创建项目管理页面元素');
      projectPage.innerHTML = `
        <div class="bg-white shadow-sm border-b">
          <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
              <div class="flex items-center space-x-4">
                <button onclick="backToHome()" class="text-gray-600 hover:text-gray-800">
                  <i class="fas fa-arrow-left mr-2"></i>返回首页
                </button>
                <h1 class="text-2xl font-bold text-gray-800">我的项目管理</h1>
              </div>
              <div class="flex items-center space-x-4">
                <span class="text-gray-600">欢迎，${currentUser?.email || '用户'}</span>
                <button onclick="handleLogout()" class="text-red-600 hover:text-red-800">
                  <i class="fas fa-sign-out-alt mr-1"></i>退出
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
          <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
            <!-- 左侧：项目列表 -->
            <div class="lg:col-span-3">
              <div class="bg-white rounded-lg shadow-sm border p-6">
                <div class="flex justify-between items-center mb-6">
                  <h2 class="text-xl font-semibold text-gray-800">我的项目</h2>
                  <button onclick="showCreateProjectModal()" 
                          class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-medium">
                    <i class="fas fa-plus mr-2"></i>新建项目
                  </button>
                </div>
                
                <div id="user-projects-list" class="space-y-4">
                  <!-- 动态加载项目列表 -->
                  <div class="text-center py-8">
                    <i class="fas fa-spinner fa-spin text-2xl text-gray-400 mb-2"></i>
                    <p class="text-gray-500">加载中...</p>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- 右侧：统计信息和通知 -->
            <div class="space-y-6">
              <!-- 邀请码通知 -->
              <div class="bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg p-4 border border-yellow-200">
                <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                  <i class="fas fa-key text-yellow-600 mr-2"></i>邀请码通知
                </h3>
                <div id="invitation-notifications" class="space-y-2">
                  <!-- 动态加载邀请码通知 -->
                  <div class="text-center py-4">
                    <i class="fas fa-spinner fa-spin text-gray-400 mb-2"></i>
                    <p class="text-gray-500 text-sm">检查邀请码...</p>
                  </div>
                </div>
              </div>
              
              <!-- 项目统计 -->
              <div class="bg-white rounded-lg shadow-sm border p-4">
                <h3 class="text-lg font-semibold text-gray-800 mb-3">项目统计</h3>
                <div class="space-y-3">
                  <div class="flex justify-between items-center">
                    <span class="text-gray-600">我创建的项目</span>
                    <span class="font-semibold text-blue-600" id="owned-projects-count">0</span>
                  </div>
                  <div class="flex justify-between items-center">
                    <span class="text-gray-600">我参与的项目</span>
                    <span class="font-semibold text-green-600" id="participated-projects-count">0</span>
                  </div>
                  <div class="flex justify-between items-center">
                    <span class="text-gray-600">总项目数</span>
                    <span class="font-semibold text-purple-600" id="total-projects-count">0</span>
                  </div>
                </div>
              </div>
              
              <!-- 快速操作 -->
              <div class="bg-white rounded-lg shadow-sm border p-4">
                <h3 class="text-lg font-semibold text-gray-800 mb-3">快速操作</h3>
                <div class="space-y-2">
                  <button onclick="showCreateProjectModal()" 
                          class="w-full px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm">
                    <i class="fas fa-plus mr-1"></i>创建新项目
                  </button>
                  <button onclick="refreshProjects()" 
                          class="w-full px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm">
                    <i class="fas fa-refresh mr-1"></i>刷新列表
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      `;
      
      document.body.appendChild(projectPage);
      console.log('项目管理页面已添加到DOM');
      
      // 加载用户项目和邀请码通知
      console.log('开始加载用户项目...');
      loadUserProjects();
      console.log('开始加载邀请码通知...');
      loadInvitationNotifications();
      
      console.log('项目管理页面显示完成');
    }

    // 返回首页
    window.backToHome = function() {
      console.log('返回首页');
      
      // 移除项目管理页面
      const projectPage = document.getElementById('project-management-page');
      if (projectPage) {
        projectPage.remove();
      }
      
      // 显示主页面内容 - 显示所有 section 元素
      const sections = document.querySelectorAll('section');
      if (sections.length > 0) {
        console.log('显示主页面内容，恢复', sections.length, '个section元素');
        sections.forEach(section => {
          section.style.display = 'block';
        });
      }
    };

    // 加载邀请码通知
    async function loadInvitationNotifications() {
      try {
        console.log('开始加载邀请码通知...');
        
        // 查询当前用户的邀请码
        const { data: invitations, error } = await window.supabase
          .from('user_invitation_codes')
          .select('*')
          .eq('user_id', currentUser.id)
          .eq('status', 'active')
          .order('created_at', { ascending: false });
        
        if (error) {
          console.error('加载邀请码通知失败:', error);
          return;
        }
        
        const container = document.getElementById('invitation-notifications');
        if (!container) return;
        
        if (!invitations || invitations.length === 0) {
          container.innerHTML = `
            <div class="text-center py-4">
              <i class="fas fa-info-circle text-gray-400 mb-2"></i>
              <p class="text-gray-500 text-sm">暂无邀请码通知</p>
            </div>
          `;
          return;
        }
        
        container.innerHTML = invitations.map(invitation => {
          const createdDate = new Date(invitation.created_at).toLocaleDateString('zh-CN');
          const expiresDate = new Date(invitation.expires_at).toLocaleDateString('zh-CN');
          
          return `
            <div class="bg-white rounded-lg p-3 border border-yellow-300 shadow-sm">
              <div class="flex justify-between items-start mb-2">
                <div class="flex items-center">
                  <i class="fas fa-key text-yellow-600 mr-2"></i>
                  <span class="font-medium text-gray-800">项目管理邀请码</span>
                </div>
                <span class="text-xs text-gray-500">${createdDate}</span>
              </div>
              <div class="mb-2">
                <code class="bg-gray-100 px-2 py-1 rounded text-sm font-mono text-purple-600">
                  ${invitation.invitation_code}
                </code>
              </div>
              <div class="text-xs text-gray-600">
                <p>有效期至: ${expiresDate}</p>
                <p class="mt-1">您可以使用此邀请码访问项目管理功能</p>
              </div>
            </div>
          `;
        }).join('');
        
        console.log('邀请码通知加载完成:', invitations);
        
      } catch (error) {
        console.error('加载邀请码通知失败:', error);
      }
    }

    // 加载用户项目
    async function loadUserProjects() {
      try {
        console.log('开始加载用户项目...');
        
        // 首先检查project_members表是否存在
        let projectMembers = [];
        try {
          // 获取用户参与的所有项目
          const { data: membersData, error: membersError } = await window.supabase
            .from('project_members')
            .select('*')
            .eq('user_id', currentUser.id)
            .eq('status', 'active');
          
          if (membersError) {
            console.error('加载项目成员信息失败:', membersError);
            // 如果表不存在或查询失败，显示空项目列表
            userProjects = [];
            updateProjectStats();
            displayUserProjects();
            return;
          }
          
          projectMembers = membersData || [];
          console.log('获取到的项目成员数据:', projectMembers);
          
        } catch (error) {
          console.log('project_members表查询失败，显示空项目列表:', error);
          userProjects = [];
          updateProjectStats();
          displayUserProjects();
          return;
        }
        
        // 如果有项目成员数据，尝试获取项目详情
        if (projectMembers.length > 0) {
          try {
            // 获取项目详情
            const projectIds = projectMembers.map(member => member.project_id).filter(id => id);
            
            if (projectIds.length > 0) {
              const { data: projectsData, error: projectsError } = await window.supabase
                .from('projects')
                .select('*')
                .in('id', projectIds);
              
              if (projectsError) {
                console.error('加载项目详情失败:', projectsError);
                // 使用基本数据
                userProjects = projectMembers.map(member => ({
                  id: member.project_id,
                  name: '项目 #' + member.project_id,
                  description: '项目描述加载中...',
                  userRole: member.role,
                  joinedAt: member.joined_at,
                  created_at: member.created_at
                }));
              } else {
                // 合并项目成员和项目详情数据
                const projectsMap = {};
                (projectsData || []).forEach(project => {
                  projectsMap[project.id] = project;
                });
                
                userProjects = projectMembers.map(member => {
                  const project = projectsMap[member.project_id] || {};
                  return {
                    ...project,
                    userRole: member.role,
                    joinedAt: member.joined_at
                  };
                });
              }
            } else {
              userProjects = [];
            }
          } catch (error) {
            console.error('获取项目详情失败:', error);
            userProjects = [];
          }
        } else {
          userProjects = [];
        }
        
        console.log('用户项目加载完成:', userProjects);
        
        // 更新统计信息
        updateProjectStats();
        
        // 显示项目列表
        displayUserProjects();
        
      } catch (error) {
        console.error('加载用户项目失败:', error);
        userProjects = [];
        updateProjectStats();
        displayUserProjects();
      }
    }

    // 更新项目统计信息
    function updateProjectStats() {
      const ownedCount = userProjects.filter(p => p.userRole === 'owner').length;
      const participatedCount = userProjects.filter(p => p.userRole !== 'owner').length;
      const totalCount = userProjects.length;
      
      document.getElementById('owned-projects-count').textContent = ownedCount;
      document.getElementById('participated-projects-count').textContent = participatedCount;
      document.getElementById('total-projects-count').textContent = totalCount;
    }

    // 显示用户项目列表
    function displayUserProjects() {
      const container = document.getElementById('user-projects-list');
      
      if (!userProjects || userProjects.length === 0) {
        container.innerHTML = `
          <div class="text-center py-8">
            <i class="fas fa-project-diagram text-4xl text-gray-300 mb-4"></i>
            <h3 class="text-lg font-semibold text-gray-600 mb-2">暂无项目</h3>
            <p class="text-gray-500 mb-4">您还没有参与任何项目</p>
            <button onclick="showCreateProjectModal()" 
                    class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700">
              <i class="fas fa-plus mr-2"></i>创建第一个项目
            </button>
          </div>
        `;
        return;
      }
      
      container.innerHTML = userProjects.map(project => {
        const roleBadge = project.userRole === 'owner' ? 
          '<span class="px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full">负责人</span>' :
          project.userRole === 'manager' ? 
          '<span class="px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">管理员</span>' :
          '<span class="px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full">成员</span>';
        
        const date = new Date(project.created_at);
        const formattedDate = date.toLocaleDateString('zh-CN');
        
        return `
          <div class="bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow">
            <div class="flex justify-between items-start mb-3">
              <h4 class="text-lg font-semibold text-gray-800">${project.name || '未命名项目'}</h4>
              ${roleBadge}
            </div>
            <p class="text-gray-600 text-sm mb-3 line-clamp-2">${project.description || '暂无描述'}</p>
            <div class="flex justify-between items-center text-sm text-gray-500">
              <span>创建于 ${formattedDate}</span>
              <div class="flex space-x-2">
                <button onclick="viewUserProject(${project.id})" 
                        class="text-blue-600 hover:text-blue-800">
                  <i class="fas fa-eye mr-1"></i>查看
                </button>
                ${project.userRole === 'owner' ? `
                  <button onclick="editUserProject(${project.id})" 
                          class="text-green-600 hover:text-green-800">
                    <i class="fas fa-edit mr-1"></i>编辑
                  </button>
                ` : ''}
              </div>
            </div>
          </div>
        `;
      }).join('');
    }

    // 返回首页
    window.backToHome = function() {
      const projectPage = document.getElementById('project-management-page');
      if (projectPage) {
        projectPage.remove();
      }
      
      // 显示主页面内容
      const mainContent = document.querySelector('main');
      if (mainContent) {
        mainContent.style.display = 'block';
      }
    };

    // 关闭项目管理模态框
    window.closeProjectManagementModal = function() {
      const modal = document.getElementById('project-management-modal');
      if (modal) {
        modal.remove();
      }
    };

    // 刷新项目列表
    window.refreshProjects = function() {
      loadUserProjects();
    };

    // 查看用户项目详情
    window.viewUserProject = function(projectId) {
      const project = userProjects.find(p => p.id === projectId);
      if (!project) {
        alert('项目不存在');
        return;
      }
      
      // 这里可以实现项目详情查看功能
      alert(`查看项目：${project.name}\n功能开发中...`);
    };

    // 编辑用户项目
    window.editUserProject = function(projectId) {
      const project = userProjects.find(p => p.id === projectId);
      if (!project) {
        alert('项目不存在');
        return;
      }
      
      // 这里可以实现项目编辑功能
      alert(`编辑项目：${project.name}\n功能开发中...`);
    };

    // 显示创建项目模态框
    window.showCreateProjectModal = function() {
      // 这里可以实现创建项目功能
      alert('创建项目功能开发中...');
    };
  </script>

  <!-- 联系管理员模态框 -->
  <div id="contact-admin-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-xl">
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-2xl font-bold text-gray-800">联系管理员</h3>
        <button onclick="closeContactAdminModal()" class="text-gray-400 hover:text-gray-600 transition-colors">
          <i class="fas fa-times text-xl"></i>
        </button>
      </div>
      
      <div class="text-center mb-6">
        <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4">
          <i class="fas fa-headset text-white text-2xl"></i>
        </div>
        <h4 class="text-lg font-semibold text-gray-900 mb-2">忘记密码？</h4>
        <p class="text-gray-600">请联系管理员重置您的密码</p>
      </div>

      <div class="space-y-4 mb-6">
        <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
          <div class="flex items-center">
            <i class="fas fa-envelope text-blue-600 mr-3 text-lg"></i>
            <div>
              <p class="text-sm font-medium text-gray-700">邮箱联系</p>
              <p class="text-blue-600 font-semibold">767997302@qq.com</p>
            </div>
          </div>
        </div>
        
        <div class="bg-green-50 rounded-lg p-4 border border-green-200">
          <div class="flex items-center">
            <i class="fas fa-phone text-green-600 mr-3 text-lg"></i>
            <div>
              <p class="text-sm font-medium text-gray-700">电话联系</p>
              <p class="text-green-600 font-semibold">18532206167</p>
            </div>
          </div>
        </div>
      </div>

      <div class="bg-yellow-50 rounded-lg p-4 border border-yellow-200 mb-6">
        <div class="flex items-start">
          <i class="fas fa-info-circle text-yellow-600 mr-3 mt-1"></i>
          <div>
            <p class="text-sm font-medium text-gray-700 mb-1">温馨提示</p>
            <p class="text-sm text-gray-600">联系管理员时，请提供您的注册邮箱和姓名，以便快速处理您的密码重置请求。</p>
          </div>
        </div>
      </div>

      <div class="flex space-x-3">
        <button onclick="copyEmail()" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors">
          <i class="fas fa-copy mr-2"></i>复制邮箱
        </button>
        <button onclick="copyPhone()" class="flex-1 bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-lg transition-colors">
          <i class="fas fa-phone mr-2"></i>复制电话
        </button>
      </div>

      <div class="mt-4 text-center">
        <button onclick="closeContactAdminModal()" class="text-gray-500 hover:text-gray-700 font-medium">
          关闭
        </button>
      </div>
    </div>
  </div>

  <script>
    // 显示联系管理员模态框
    function showContactAdminModal() {
      document.getElementById('contact-admin-modal').classList.remove('hidden');
    }

    // 关闭联系管理员模态框
    function closeContactAdminModal() {
      document.getElementById('contact-admin-modal').classList.add('hidden');
    }

    // 复制邮箱到剪贴板
    function copyEmail() {
      const email = '767997302@qq.com';
      navigator.clipboard.writeText(email).then(function() {
        // 显示成功提示
        const button = event.target.closest('button');
        const originalText = button.innerHTML;
        button.innerHTML = '<i class="fas fa-check mr-2"></i>已复制';
        button.classList.remove('bg-blue-600', 'hover:bg-blue-700');
        button.classList.add('bg-green-600', 'hover:bg-green-700');
        
        setTimeout(() => {
          button.innerHTML = originalText;
          button.classList.remove('bg-green-600', 'hover:bg-green-700');
          button.classList.add('bg-blue-600', 'hover:bg-blue-700');
        }, 2000);
      }).catch(function(err) {
        console.error('复制失败:', err);
        alert('复制失败，请手动复制：' + email);
      });
    }

    // 复制电话到剪贴板
    function copyPhone() {
      const phone = '18532206167';
      navigator.clipboard.writeText(phone).then(function() {
        // 显示成功提示
        const button = event.target.closest('button');
        const originalText = button.innerHTML;
        button.innerHTML = '<i class="fas fa-check mr-2"></i>已复制';
        button.classList.remove('bg-green-600', 'hover:bg-green-700');
        button.classList.add('bg-blue-600', 'hover:bg-blue-700');
        
        setTimeout(() => {
          button.innerHTML = originalText;
          button.classList.remove('bg-blue-600', 'hover:bg-blue-700');
          button.classList.add('bg-green-600', 'hover:bg-green-700');
        }, 2000);
      }).catch(function(err) {
        console.error('复制失败:', err);
        alert('复制失败，请手动复制：' + phone);
      });
    }

    // 将函数暴露到全局作用域
    window.showContactAdminModal = showContactAdminModal;
    window.closeContactAdminModal = closeContactAdminModal;
    window.copyEmail = copyEmail;
    window.copyPhone = copyPhone;
    
    // 视频控制功能
    function initVideoControls() {
      const video = document.getElementById('hero-video');
      const playPauseBtn = document.getElementById('play-pause-btn');
      const muteBtn = document.getElementById('mute-btn');
      const progressBar = document.getElementById('progress-bar');
      const progressFill = document.getElementById('progress-fill');
      const volumeBar = document.getElementById('volume-bar');
      const volumeFill = document.getElementById('volume-fill');
      const currentTimeSpan = document.getElementById('current-time');
      const totalTimeSpan = document.getElementById('total-time');
      
      if (!video) return;
      
      // 格式化时间
      function formatTime(seconds) {
        const mins = Math.floor(seconds / 60);
        const secs = Math.floor(seconds % 60);
        return `${mins}:${secs.toString().padStart(2, '0')}`;
      }
      
      // 更新进度条
      function updateProgress() {
        if (video.duration) {
          const progress = (video.currentTime / video.duration) * 100;
          progressFill.style.width = progress + '%';
          currentTimeSpan.textContent = formatTime(video.currentTime);
        }
      }
      
      // 更新音量条
      function updateVolume() {
        const volume = video.volume * 100;
        volumeFill.style.width = volume + '%';
        
        // 更新静音按钮图标
        if (video.muted || video.volume === 0) {
          muteBtn.innerHTML = '<i class="fas fa-volume-mute text-lg"></i>';
        } else if (video.volume < 0.5) {
          muteBtn.innerHTML = '<i class="fas fa-volume-down text-lg"></i>';
        } else {
          muteBtn.innerHTML = '<i class="fas fa-volume-up text-lg"></i>';
        }
      }
      
      // 播放/暂停切换
      playPauseBtn.addEventListener('click', function() {
        if (video.paused) {
          video.play();
          playPauseBtn.innerHTML = '<i class="fas fa-pause text-lg"></i>';
        } else {
          video.pause();
          playPauseBtn.innerHTML = '<i class="fas fa-play text-lg"></i>';
        }
      });
      
      // 静音/取消静音
      muteBtn.addEventListener('click', function() {
        video.muted = !video.muted;
        updateVolume();
      });
      
      // 进度条点击跳转
      progressBar.addEventListener('click', function(e) {
        const rect = progressBar.getBoundingClientRect();
        const clickX = e.clientX - rect.left;
        const progress = clickX / rect.width;
        video.currentTime = progress * video.duration;
      });
      
      // 音量条点击调节
      volumeBar.addEventListener('click', function(e) {
        const rect = volumeBar.getBoundingClientRect();
        const clickX = e.clientX - rect.left;
        const volume = clickX / rect.width;
        video.volume = Math.max(0, Math.min(1, volume));
        video.muted = false;
        updateVolume();
      });
      
      // 视频事件监听
      video.addEventListener('loadedmetadata', function() {
        totalTimeSpan.textContent = formatTime(video.duration);
      });
      
      video.addEventListener('timeupdate', updateProgress);
      video.addEventListener('volumechange', updateVolume);
      
      // 初始化音量
      video.volume = 0.5;
      updateVolume();
    }
    
    // 成就证书轮播功能
    function initCertificateCarousel() {
      const carousel = document.getElementById('certificate-carousel');
      const prevBtn = document.getElementById('prev-btn');
      const nextBtn = document.getElementById('next-btn');
      const indicators = document.getElementById('carousel-indicators');
      
      if (!carousel) return;
      
      // 成就证书列表
      let certificates = [];
      
      // 检测证书文件夹中的图片
      function detectCertificates() {
        // 常见图片格式
        const imageExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.webp'];
        
        // 尝试加载一些可能的文件名模式
        const possibleNames = [];
        
        // 数字命名模式 (1.jpg, 2.jpg, ...)
        for (let i = 1; i <= 100; i++) {
          imageExtensions.forEach(ext => {
            possibleNames.push(`images/证书/${i}${ext}`);
          });
        }
        
        // 字母数字组合模式
        const patterns = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j'];
        patterns.forEach(pattern => {
          imageExtensions.forEach(ext => {
            possibleNames.push(`images/证书/${pattern}${ext}`);
          });
        });
        
        // 中文命名模式
        const chineseNames = [
          '证书', '奖状', '荣誉', '获奖', '颁奖', '证书留念', '荣誉证书', '获奖证书',
          '颁奖证书', '荣誉奖状', '获奖奖状', '颁奖奖状', '荣誉活动', '获奖活动'
        ];
        chineseNames.forEach(name => {
          imageExtensions.forEach(ext => {
            possibleNames.push(`images/证书/${name}${ext}`);
          });
        });
        
        // 测试图片是否存在
        testImages(possibleNames);
      }
      
      // 测试图片是否存在
      function testImages(imagePaths) {
        let loadedCount = 0;
        const maxTest = 50; // 最多测试50张图片
        
        imagePaths.slice(0, maxTest).forEach((path, index) => {
          const img = new Image();
          img.onload = function() {
                                if (!certificates.includes(path)) {
              certificates.push(path);
              loadedCount++;
              if (loadedCount === 1) {
                // 第一张图片加载成功后立即初始化轮播
                initCarousel();
              }
            }
          };
          img.onerror = function() {
            // 图片不存在，继续测试下一张
          };
          img.src = path;
        });
        
        // 如果没有任何图片加载成功，使用默认列表
        setTimeout(() => {
                      if (certificates.length === 0) {
            // 使用最新的证书图片文件
                        const fallbackImages = [
              'images/证书/图片3.jpg', 'images/证书/图片1.jpg', 'images/证书/b572245d11469cfad5a3e0b29e95aab.png',
              'images/证书/83192ed7ff8448e45db2747a3434e3b.jpg', 'images/证书/72d20b3fda03743535342251bd1b51e.jpg', 'images/证书/7140d57477d378d978bc1cf188f47b4.jpg',
              'images/证书/d2c45cfac85abc1bef8068f90323149.jpg', 'images/证书/三创赛省赛.jpg', 'images/证书/英译汉非英语专业一等奖.png',
              'images/证书/b8f8e6bd3a513d764d51bf23e087b40.jpg', 'images/证书/2025计算机设计大赛国赛二等奖.jpg', 'images/证书/54e62f33e4d99cb126311630142b525.jpg',
              'images/证书/740e96d45d135f1d6fa398ee994f82d.jpg', 'images/证书/2be6dc24d2fb29ea6dcda51f309d7c9a.jpg', 'images/证书/8940aa4f61b3f18fc944235b6640e78.jpg',
              'images/证书/软著_.jpeg', 'images/证书/庞凯泽_2024年第十届数维杯国际大学生数学建模挑战赛国际二等奖.jpg',
              'images/证书/庞凯泽_高教社杯全国大学生数学建模竞赛(2024)海南赛区中荣获本科组三等奖.jpg', 'images/证书/d5b85adcacd8e499f82f39986dde391.jpg',
              'images/证书/135a205c064aea00cc8365725ca50eb.jpg', 'images/证书/d2d02104a720af5cbecf24bdf586150.jpg', 'images/证书/172082ef0537fa8cca8ece25134effb.jpg',
              'images/证书/b0bb33e281804683ae5f72da01c766c.jpg', 'images/证书/三创赛.jpg', 'images/证书/image.png'
            ];
            
            // 过滤掉不存在的图片
            const validImages = [];
            let checkedCount = 0;
            
            fallbackImages.forEach((path, index) => {
              const img = new Image();
              img.onload = function() {
                validImages.push(path);
                checkedCount++;
                if (checkedCount === fallbackImages.length) {
                  certificates = validImages;
                  if (certificates.length > 0) {
                    initCarousel();
                  }
                }
              };
              img.onerror = function() {
                checkedCount++;
                if (checkedCount === fallbackImages.length) {
                  certificates = validImages;
                  if (certificates.length > 0) {
                    initCarousel();
                  }
                }
              };
              img.src = path;
            });
          }
        }, 2000);
      }
      
      let currentIndex = 0;
      let autoPlayInterval;
      
      // 按图片尺寸分组并统一高度
      function groupImagesBySize() {
        const imageGroups = {
          portrait: [],    // 竖版图片 (高度 > 宽度)
          landscape: [],   // 横版图片 (宽度 > 高度)
          square: []       // 方形图片 (宽度 ≈ 高度)
        };
        
        // 预加载图片并测量尺寸
        const loadPromises = certificates.map((path, index) => {
          return new Promise((resolve) => {
            const img = new Image();
            img.onload = function() {
              const ratio = img.width / img.height;
              let group;
              
              if (ratio > 1.2) {
                group = 'landscape';  // 横版
              } else if (ratio < 0.8) {
                group = 'portrait';   // 竖版
              } else {
                group = 'square';     // 方形
              }
              
              resolve({
                path: path,
                index: index,
                group: group,
                ratio: ratio,
                width: img.width,
                height: img.height
              });
            };
            img.onerror = function() {
              resolve(null); // 加载失败的图片
            };
            img.src = path;
          });
        });
        
        // 等待所有图片加载完成后分组
        Promise.all(loadPromises).then((results) => {
          const validResults = results.filter(result => result !== null);
          
          if (validResults.length === 0) {
            console.log('没有有效的图片数据');
            return;
          }
          
          // 按组分类
          validResults.forEach(result => {
            imageGroups[result.group].push(result);
          });
          
          // 计算统一的目标高度（使用所有图片中最大的高度作为基准）
          const maxHeight = Math.max(...validResults.map(r => r.height));
          const targetHeight = maxHeight;
          console.log('统一目标高度:', targetHeight);
          
          // 为每个图片计算缩放后的尺寸信息
          const processedCertificates = validResults.map(result => {
            const scale = targetHeight / result.height;
            const scaledWidth = result.width * scale;
            const scaledHeight = targetHeight;
            
            return {
              ...result,
              scaledWidth: scaledWidth,
              scaledHeight: scaledHeight,
              scale: scale,
              displayStyle: result.ratio > 1.2 ? 'landscape' : result.ratio < 0.8 ? 'portrait' : 'square'
            };
          });
          
          // 按显示效果重新排序：竖版 -> 方形 -> 横版
          const sortedCertificates = [];
          
          // 竖版图片按高度排序
          const portraitImages = processedCertificates.filter(img => img.displayStyle === 'portrait');
          portraitImages.sort((a, b) => a.height - b.height);
          sortedCertificates.push(...portraitImages);
          
          // 方形图片按尺寸排序
          const squareImages = processedCertificates.filter(img => img.displayStyle === 'square');
          squareImages.sort((a, b) => (a.width * a.height) - (b.width * b.height));
          sortedCertificates.push(...squareImages);
          
          // 横版图片按宽度排序
          const landscapeImages = processedCertificates.filter(img => img.displayStyle === 'landscape');
          landscapeImages.sort((a, b) => a.width - b.width);
          sortedCertificates.push(...landscapeImages);
          
          // 更新证书列表并重新创建轮播
          certificates = sortedCertificates;
          createCarouselItems();
          createIndicators();
          startAutoPlay();
        });
      }
      
      // 创建轮播项
      function createCarouselItems() {
        carousel.innerHTML = '';
        
        // 创建足够多的轮播项以支持无限滚动
                for (let i = 0; i < certificates.length * 3; i++) {
          const index = i % certificates.length;
          const certificate = certificates[index];
          const item = document.createElement('div');
          item.className = 'flex-shrink-0 w-full md:w-1/2 lg:w-1/3 xl:w-1/4 px-0.5';
          
          // 图片类型信息用于调试
          console.log(`处理图片: ${certificate.path}, 类型: ${certificate.displayStyle}, 原始尺寸: ${certificate.width}x${certificate.height}`);
          
          item.innerHTML = `
            <div class="relative group overflow-hidden rounded-lg shadow-lg bg-white p-1 certificate-item">
              <img src="${certificate.path}" 
                   alt="荣誉证书" 
                   class="certificate-image cursor-pointer"
                   onerror="this.parentElement.style.display='none'">
            </div>
          `;
          
          carousel.appendChild(item);
        }
      }
      
      // 创建指示器
      function createIndicators() {
        indicators.innerHTML = '';
        for (let i = 0; i < certificates.length; i++) {
          const indicator = document.createElement('button');
          indicator.className = `w-3 h-3 rounded-full transition-all duration-300 ${i === 0 ? 'bg-primary' : 'bg-gray-300'}`;
          indicator.onclick = () => goToSlide(i);
          indicators.appendChild(indicator);
        }
      }
      
      // 更新指示器
      function updateIndicators() {
        const dots = indicators.querySelectorAll('button');
        dots.forEach((dot, index) => {
          dot.className = `w-3 h-3 rounded-full transition-all duration-300 ${index === currentIndex ? 'bg-primary' : 'bg-gray-300'}`;
        });
      }
      
      // 跳转到指定幻灯片
      function goToSlide(index) {
        currentIndex = index;
        const offset = -currentIndex * (100 / 4); // 4个可见项
        carousel.style.transform = `translateX(${offset}%)`;
        updateIndicators();
      }
      
      // 下一张
      function nextSlide() {
        currentIndex = (currentIndex + 1) % certificates.length;
        goToSlide(currentIndex);
      }
      
      // 上一张
      function prevSlide() {
        currentIndex = (currentIndex - 1 + certificates.length) % certificates.length;
        goToSlide(currentIndex);
      }
      
      // 自动播放
      function startAutoPlay() {
        autoPlayInterval = setInterval(nextSlide, 1500); // 缩短到1.5秒
      }
      
      function stopAutoPlay() {
        clearInterval(autoPlayInterval);
      }
      
      // 事件监听
      prevBtn.addEventListener('click', () => {
        prevSlide();
        stopAutoPlay();
        startAutoPlay();
      });
      
      nextBtn.addEventListener('click', () => {
        nextSlide();
        stopAutoPlay();
        startAutoPlay();
      });
      
      // 鼠标悬停时暂停自动播放
      carousel.addEventListener('mouseenter', stopAutoPlay);
      carousel.addEventListener('mouseleave', startAutoPlay);
      
      // 触摸事件支持
      let startX = 0;
      let endX = 0;
      
      carousel.addEventListener('touchstart', (e) => {
        startX = e.touches[0].clientX;
      });
      
      carousel.addEventListener('touchend', (e) => {
        endX = e.changedTouches[0].clientX;
        const diff = startX - endX;
        
        if (Math.abs(diff) > 50) {
          if (diff > 0) {
            nextSlide();
          } else {
            prevSlide();
          }
          stopAutoPlay();
          startAutoPlay();
        }
      });
      
      // 初始化轮播
      function initCarousel() {
        if (certificates.length === 0) return;
        
        // 使用图片分组功能
        groupImagesBySize();
      }
      
              // 开始检测证书
              detectCertificates();
    }
    
    // 比赛风采照片轮播功能
    function initCompetitionPhotosCarousel() {
      console.log('开始初始化比赛风采轮播...');
      
      const carousel = document.getElementById('competition-photos-carousel');
      const prevBtn = document.getElementById('competition-prev-btn');
      const nextBtn = document.getElementById('competition-next-btn');
      const indicators = document.getElementById('competition-carousel-indicators');
      
      console.log('轮播元素:', { carousel, prevBtn, nextBtn, indicators });
      
      if (!carousel) {
        console.error('找不到轮播容器元素');
        return;
      }
      
      if (!prevBtn || !nextBtn || !indicators) {
        console.error('找不到轮播控制元素');
        return;
      }
      
      // 比赛风采照片列表
      let competitionPhotos = [];
      
      // 检测合影文件夹中的图片
      function detectCompetitionPhotos() {
        // 使用最新的合影图片列表
        const fallbackImages = [
          'images/合影/图片16.png', 'images/合影/图片15.png', 'images/合影/图片11.jpg', 'images/合影/图片10.jpg', 'images/合影/图片9.png', 'images/合影/图片8.jpg',
          'images/合影/图片7.jpg', 'images/合影/图片6.jpg', 'images/合影/图片5.jpg', 'images/合影/图片4.jpg', 'images/合影/42.jpg', 'images/合影/23.jpg',
          'images/合影/1.jpg', 'images/合影/14.jpg', 'images/合影/11.jpg', 'images/合影/10.png', 'images/合影/640 (23).jpg', 'images/合影/47.webp',
          'images/合影/46.webp', 'images/合影/45.webp', 'images/合影/12.webp', 'images/合影/21.jpg', 'images/合影/13.jpg', 'images/合影/25.jpg',
          'images/合影/36ea79f75c3c352d2f53cd8f2396832.jpg', 'images/合影/20.jpg', 'images/合影/44.jpg', 'images/合影/27.jpg', 'images/合影/22.jpg', 'images/合影/26.jpg',
          'images/合影/3.jpg', 'images/合影/mmexport1748485696692.jpg', 'images/合影/39.jpg', 'images/合影/9.jpg', 'images/合影/30.jpg', 'images/合影/29.jpg',
          'images/合影/31.jpg', 'images/合影/35.jpg', 'images/合影/33.jpg', 'images/合影/34.jpg', 'images/合影/40.jpg', 'images/合影/5.jpg',
          'images/合影/43.jpg', 'images/合影/8.jpg', 'images/合影/2.jpg', 'images/合影/3D0A6020-opq3708830437.jpg', 'images/合影/wx_camera_1735558696452.jpg',
          'images/合影/wx_camera_1735558714017.jpg', 'images/合影/mmexport1735558767787.jpg', 'images/合影/41.png', 'images/合影/19.jpg', 'images/合影/wx_camera_1742394200629.jpg',
          'images/合影/48.jpg', 'images/合影/24.jpg', 'images/合影/28.jpg', 'images/合影/16.jpg', 'images/合影/32.jpg', 'images/合影/6.jpg',
          'images/合影/37.png', 'images/合影/17.jpg', 'images/合影/18.jpg', 'images/合影/4.jpg', 'images/合影/mmexport1712454685939.jpg', 'images/合影/15.png',
          'images/合影/4f8c279314597bad97148f5d131d91f.png', 'images/合影/mmexport1694336626254.jpg', 'images/合影/mmexport1694336634852.jpg', 'images/合影/38.jpg',
          'images/合影/7.jpg', 'images/合影/mmexport1682681819072.jpg', 'images/合影/36.jpg'
        ];
        
        // 直接使用本地图片
        competitionPhotos = fallbackImages;
        console.log('比赛风采照片列表:', competitionPhotos);
        console.log('照片总数:', competitionPhotos.length);
        
        // 延迟初始化，确保DOM完全准备好
        setTimeout(() => {
          initCarousel();
        }, 100);
      }
      
      let currentIndex = 0;
      let autoPlayInterval;
      
      // 创建轮播项
      function createCarouselItems() {
        carousel.innerHTML = '';
        
        console.log('创建轮播项，照片列表:', competitionPhotos);
        
        // 计算每页显示的图片数量（2行3列 = 6张）
        const itemsPerPage = 6;
        const totalPages = Math.ceil(competitionPhotos.length / itemsPerPage);
        
        console.log(`总共 ${totalPages} 页，每页 ${itemsPerPage} 张照片`);
        
        // 创建轮播页面容器
        for (let page = 0; page < totalPages; page++) {
          const pageContainer = document.createElement('div');
          pageContainer.className = 'w-full flex-shrink-0 carousel-page';
          pageContainer.style.display = page === 0 ? 'block' : 'none';
          
          // 创建2行3列的网格
          const gridContainer = document.createElement('div');
          gridContainer.className = 'grid grid-cols-3 gap-4';
          gridContainer.style.minHeight = '600px';
          
          // 为当前页的6张照片创建轮播项
          const startIndex = page * itemsPerPage;
          const endIndex = Math.min(startIndex + itemsPerPage, competitionPhotos.length);
          
          for (let i = startIndex; i < endIndex; i++) {
            const photo = competitionPhotos[i];
            const item = document.createElement('div');
            item.className = 'h-72 overflow-hidden rounded-lg shadow-lg bg-white';
            
            item.innerHTML = `
              <img src="${photo}" 
                   alt="比赛风采照片" 
                   class="w-full h-full object-cover transition-transform hover:scale-110 duration-500 cursor-pointer"
                   onload="console.log('图片加载成功:', photo)"
                   onerror="console.error('图片加载失败:', photo); this.style.display='none'; this.parentElement.style.backgroundColor='#f3f4f6';">
            `;
            
            gridContainer.appendChild(item);
          }
          
          pageContainer.appendChild(gridContainer);
          carousel.appendChild(pageContainer);
          console.log(`创建轮播页面 ${page}:`, startIndex, '到', endIndex);
        }
      }
      
      // 创建指示器
      function createIndicators() {
        indicators.innerHTML = '';
        const totalPages = Math.ceil(competitionPhotos.length / 6);
        
        for (let i = 0; i < totalPages; i++) {
          const indicator = document.createElement('button');
          indicator.className = `w-3 h-3 rounded-full transition-all duration-300 ${i === 0 ? 'bg-primary' : 'bg-gray-300'}`;
          indicator.onclick = () => goToSlide(i);
          indicators.appendChild(indicator);
        }
        
        console.log(`创建了 ${totalPages} 个页面指示器`);
      }
      
      // 更新指示器
      function updateIndicators() {
        const dots = indicators.querySelectorAll('button');
        dots.forEach((dot, index) => {
          dot.className = `w-3 h-3 rounded-full transition-all duration-300 ${index === currentIndex ? 'bg-primary' : 'bg-gray-300'}`;
        });
        
        console.log(`当前页面: ${currentIndex + 1}`);
      }
      
      // 跳转到指定页面
      function goToSlide(pageIndex) {
        currentIndex = pageIndex;
        
        // 隐藏所有页面，只选择页面容器
        const pages = carousel.querySelectorAll('.carousel-page');
        pages.forEach((page, index) => {
          page.style.display = index === pageIndex ? 'block' : 'none';
        });
        
        console.log(`切换到页面 ${pageIndex + 1}`);
        updateIndicators();
      }
      
      // 下一页
      function nextSlide() {
        const totalPages = Math.ceil(competitionPhotos.length / 6);
        currentIndex = (currentIndex + 1) % totalPages;
        goToSlide(currentIndex);
      }
      
      // 上一页
      function prevSlide() {
        const totalPages = Math.ceil(competitionPhotos.length / 6);
        currentIndex = (currentIndex - 1 + totalPages) % totalPages;
        goToSlide(currentIndex);
      }
      
      // 自动播放
      function startAutoPlay() {
        autoPlayInterval = setInterval(nextSlide, 1500); // 1.5秒切换一次，与荣誉证书轮播保持一致
      }
      
      function stopAutoPlay() {
        clearInterval(autoPlayInterval);
      }
      
      // 事件监听
      prevBtn.addEventListener('click', () => {
        prevSlide();
        stopAutoPlay();
        startAutoPlay();
      });
      
      nextBtn.addEventListener('click', () => {
        nextSlide();
        stopAutoPlay();
        startAutoPlay();
      });
      
      // 鼠标悬停时暂停自动播放
      carousel.addEventListener('mouseenter', stopAutoPlay);
      carousel.addEventListener('mouseleave', startAutoPlay);
      
      // 初始化轮播
      function initCarousel() {
        if (competitionPhotos.length === 0) return;
        
        console.log('初始化比赛风采轮播，照片数量:', competitionPhotos.length);
        createCarouselItems();
        createIndicators();
        startAutoPlay();
      }
      
      // 开始检测比赛照片
      detectCompetitionPhotos();
    }
    
    // 团队活动照片轮播功能
    function initTeamActivityCarousel() {
      console.log('开始初始化团队活动轮播...');
      
      const carousel = document.getElementById('team-activity-carousel');
      const prevBtn = document.getElementById('team-activity-prev-btn');
      const nextBtn = document.getElementById('team-activity-next-btn');
      const indicators = document.getElementById('team-activity-carousel-indicators');
      
      console.log('团队活动轮播元素:', { carousel, prevBtn, nextBtn, indicators });
      
      if (!carousel) {
        console.error('找不到团队活动轮播容器元素');
        return;
      }
      
      if (!prevBtn || !nextBtn || !indicators) {
        console.error('找不到团队活动轮播控制元素');
        return;
      }
      
      // 团队活动照片列表
      let teamActivityPhotos = [];
      
      // 检测团建文件夹中的图片
      function detectTeamActivityPhotos() {
        // 使用最新的团建文件夹中的图片
        const fallbackImages = [
          'images/团建/图片14.png', 'images/团建/图片13.png', 'images/团建/Screenshot_2025-01-28-22-06-13-24_99c04817c0de5652397fc8b56c3b3817.jpg',
          'images/团建/9d5432d7ac3e7ea71742d8c67539290.jpg', 'images/团建/43748e22ab92a3cf46da04350f0a5d1.png', 'images/团建/a41322b8c73b48d3f1786fc7882491e.jpg',
          'images/团建/0f6dc2eb8d616e2e85fc8ceb0dc9b66.jpg', 'images/团建/mmexport1689606494384.jpg', 'images/团建/9185e06ae735a9dff10eaba106b5627.jpg',
          'images/团建/9d15cf5b43860609c0a005881b91e86.jpg', 'images/团建/ReLens_Image_2024-10-05_19_59_50_3361x2530.png', 'images/团建/mmexport1749905753381.jpg',
          'images/团建/mmexport1750460276780.jpg', 'images/团建/mmexport1689606498570.png', 'images/团建/mmexport1735649875963.jpg',
          'images/团建/mmexport1729690659871.jpg', 'images/团建/wx_camera_1732711257688.jpg', 'images/团建/mmexport1685231813740.jpg',
          'images/团建/mmexport1686677065908.jpg'
        ];
        
        // 直接使用本地图片
        teamActivityPhotos = fallbackImages;
        console.log('团队活动照片列表:', teamActivityPhotos);
        console.log('照片总数:', teamActivityPhotos.length);
        
        // 延迟初始化，确保DOM完全准备好
        setTimeout(() => {
          initCarousel();
        }, 100);
      }
      
      let currentIndex = 0;
      let autoPlayInterval;
      
      // 创建轮播项
      function createCarouselItems() {
        carousel.innerHTML = '';
        
        console.log('创建团队活动轮播项，照片列表:', teamActivityPhotos);
        
        // 计算每页显示的图片数量（2行3列 = 6张）
        const itemsPerPage = 6;
        const totalPages = Math.ceil(teamActivityPhotos.length / itemsPerPage);
        
        console.log(`总共 ${totalPages} 页，每页 ${itemsPerPage} 张照片`);
        
        // 创建轮播页面容器
        for (let page = 0; page < totalPages; page++) {
          const pageContainer = document.createElement('div');
          pageContainer.className = 'w-full flex-shrink-0 carousel-page';
          pageContainer.style.display = page === 0 ? 'block' : 'none';
          
          // 创建2行3列的网格
          const gridContainer = document.createElement('div');
          gridContainer.className = 'grid grid-cols-3 gap-4';
          gridContainer.style.minHeight = '600px';
          
          // 为当前页的6张照片创建轮播项
          const startIndex = page * itemsPerPage;
          const endIndex = Math.min(startIndex + itemsPerPage, teamActivityPhotos.length);
          
          for (let i = startIndex; i < endIndex; i++) {
            const photo = teamActivityPhotos[i];
            const item = document.createElement('div');
            item.className = 'h-72 overflow-hidden rounded-lg shadow-lg bg-white';
            
            item.innerHTML = `
              <img src="${photo}" 
                   alt="团队活动照片" 
                   class="w-full h-full object-cover transition-transform hover:scale-110 duration-500 cursor-pointer"
                   onload="console.log('团队活动图片加载成功:', photo)"
                   onerror="console.error('团队活动图片加载失败:', photo); this.style.display='none'; this.parentElement.style.backgroundColor='#f3f4f6';">
            `;
            
            gridContainer.appendChild(item);
          }
          
          pageContainer.appendChild(gridContainer);
          carousel.appendChild(pageContainer);
          console.log(`创建团队活动轮播页面 ${page}:`, startIndex, '到', endIndex);
        }
      }
      
      // 创建指示器
      function createIndicators() {
        indicators.innerHTML = '';
        const totalPages = Math.ceil(teamActivityPhotos.length / 6);
        
        for (let i = 0; i < totalPages; i++) {
          const indicator = document.createElement('button');
          indicator.className = `w-3 h-3 rounded-full transition-all duration-300 ${i === 0 ? 'bg-primary' : 'bg-gray-300'}`;
          indicator.onclick = () => goToSlide(i);
          indicators.appendChild(indicator);
        }
        
        console.log(`创建了 ${totalPages} 个团队活动页面指示器`);
      }
      
      // 更新指示器
      function updateIndicators() {
        const dots = indicators.querySelectorAll('button');
        dots.forEach((dot, index) => {
          dot.className = `w-3 h-3 rounded-full transition-all duration-300 ${index === currentIndex ? 'bg-primary' : 'bg-gray-300'}`;
        });
        
        console.log(`团队活动当前页面: ${currentIndex + 1}`);
      }
      
      // 跳转到指定页面
      function goToSlide(pageIndex) {
        currentIndex = pageIndex;
        
        // 隐藏所有页面，只选择页面容器
        const pages = carousel.querySelectorAll('.carousel-page');
        pages.forEach((page, index) => {
          page.style.display = index === pageIndex ? 'block' : 'none';
        });
        
        console.log(`团队活动切换到页面 ${pageIndex + 1}`);
        updateIndicators();
      }
      
      // 下一页
      function nextSlide() {
        const totalPages = Math.ceil(teamActivityPhotos.length / 6);
        currentIndex = (currentIndex + 1) % totalPages;
        goToSlide(currentIndex);
      }
      
      // 上一页
      function prevSlide() {
        const totalPages = Math.ceil(teamActivityPhotos.length / 6);
        currentIndex = (currentIndex - 1 + totalPages) % totalPages;
        goToSlide(currentIndex);
      }
      
      // 自动播放
      function startAutoPlay() {
        autoPlayInterval = setInterval(nextSlide, 1500); // 1.5秒切换一次，与其他轮播保持一致
      }
      
      function stopAutoPlay() {
        clearInterval(autoPlayInterval);
      }
      
      // 事件监听
      prevBtn.addEventListener('click', () => {
        prevSlide();
        stopAutoPlay();
        startAutoPlay();
      });
      
      nextBtn.addEventListener('click', () => {
        nextSlide();
        stopAutoPlay();
        startAutoPlay();
      });
      
      // 鼠标悬停时暂停自动播放
      carousel.addEventListener('mouseenter', stopAutoPlay);
      carousel.addEventListener('mouseleave', startAutoPlay);
      
      // 初始化轮播
      function initCarousel() {
        if (teamActivityPhotos.length === 0) return;
        
        console.log('初始化团队活动轮播，照片数量:', teamActivityPhotos.length);
        createCarouselItems();
        createIndicators();
        startAutoPlay();
      }
      
      // 开始检测团队活动照片
      detectTeamActivityPhotos();
    }
    
    // 项目列表 - 按照指定顺序排列，前6个为首页展示项目
    const projects = [
      // 首页展示的6个项目（从左到右，从上到下）
      {
        name: 'AR慧眼学语',
        image: 'images/项目展示/AR慧眼学语/1.png',
        description: '项目描述待补充...',
        technologies: ['技术栈待补充']
      },
      {
        name: '天工开物之溯源',
        image: 'images/项目展示/天工开物之溯源/1.png',
        description: '项目描述待补充...',
        technologies: ['技术栈待补充']
      },
      {
        name: '声波方舟',
        image: 'images/项目展示/声波方舟/1.png',
        description: '项目描述待补充...',
        technologies: ['技术栈待补充']
      },
      {
        name: '遥感地面核查',
        image: 'images/项目展示/遥感地面核查/1.jpg',
        description: '项目描述待补充...',
        technologies: ['技术栈待补充']
      },
      {
        name: '2025年三亚市初中周末公益课堂',
        image: 'images/项目展示/2025年三亚市初中周末公益课堂/1.jpg',
        description: '项目描述待补充...',
        technologies: ['技术栈待补充']
      },
      {
        name: '第八届全国成像光谱对地观测学术研讨会',
        image: 'images/项目展示/第八届全国成像光谱对地观测学术研讨会/1.jpg',
        description: '项目描述待补充...',
        technologies: ['技术栈待补充']
      },
      // 其他项目（点击查看更多项目后显示）
      {
        name: '虚拟围栏守护者',
        image: 'images/项目展示/虚拟围栏守护者/1.jpg',
        description: '项目描述待补充...',
        technologies: ['技术栈待补充']
      },
      {
        name: '自贸港创业创新',
        image: 'images/项目展示/自贸港创业创新/1.gif',
        description: '项目描述待补充...',
        technologies: ['技术栈待补充']
      },
      {
        name: '智能小车',
        image: 'images/项目展示/智能小车/1.jpg',
        description: '项目描述待补充...',
        technologies: ['技术栈待补充']
      },
      {
        name: 'VR星图',
        image: 'images/项目展示/VR星图/1.webp',
        description: '项目描述待补充...',
        technologies: ['技术栈待补充']
      },
      {
        name: 'VR网球',
        image: 'images/项目展示/VR网球/1.png',
        description: '项目描述待补充...',
        technologies: ['技术栈待补充']
      },
      {
        name: '台球',
        image: 'images/项目展示/台球/1.png',
        description: '项目描述待补充...',
        technologies: ['技术栈待补充']
      },
      {
        name: '中科院深海所项目',
        image: 'images/项目展示/中科院深海所项目/1.gif',
        description: '项目描述待补充...',
        technologies: ['技术栈待补充']
      },
      {
        name: '稼穑天工',
        image: 'images/项目展示/稼穑天工/1.png',
        description: '项目描述待补充...',
        technologies: ['技术栈待补充']
      },
        {
          name: '第二届亚洲国像与国形研讨会',
          image: 'images/项目展示/第二届亚洲国像与国形研讨会/1.jpg',
          description: '项目描述待补充...',
          technologies: ['技术栈待补充']
        },
        {
          name: '画江湖之不良蛋',
          image: 'images/项目展示/画江湖之不良蛋/1.png',
          description: '项目描述待补充...',
          technologies: ['技术栈待补充']
        },
        {
          name: '谷韵连疆粮食供应链平台',
          image: 'images/项目展示/谷韵连疆粮食供应链平台/1.png',
          description: '项目描述待补充...',
          technologies: ['技术栈待补充']
        },
        {
          name: '谷歌教育应用',
          image: 'images/项目展示/谷歌教育应用/1.jpg',
          description: '项目描述待补充...',
          technologies: ['技术栈待补充']
        },
        {
          name: '疯狂渡海人',
          image: 'images/项目展示/疯狂渡海人/1.jpg',
          description: '项目描述待补充...',
          technologies: ['技术栈待补充']
        },
        {
          name: '吉利AIGC赋能新世界作品征集大赛',
          image: 'images/项目展示/吉利AIGC赋能新世界作品征集大赛/1.png',
          description: '项目描述待补充...',
          technologies: ['技术栈待补充']
        },
        {
          name: '2023国际测试委员会智能计算机与芯片联邦大会',
          image: 'images/项目展示/2023国际测试委员会智能计算机与芯片联邦大会/1.jpg',
          description: '项目描述待补充...',
          technologies: ['技术栈待补充']
        },
        {
          name: 'VR垃圾分类',
          image: 'images/项目展示/VR垃圾分类/1.jpg',
          description: '项目描述待补充...',
          technologies: ['技术栈待补充']
        }
      ];
      
      console.log('项目列表:', projects);
      console.log('项目总数:', projects.length);
      
      // 项目作品动态加载功能
      function initProjectsDisplay() {
        console.log('开始初始化项目作品展示...');
        
        const container = document.getElementById('projects-container');
        if (!container) {
          console.error('找不到项目容器元素');
          return;
        }
        
        // 创建项目卡片（只显示前6个）
        function createProjectCards() {
        container.innerHTML = '';
        
        // 只显示前6个项目
        const displayProjects = projects.slice(0, 6);
        
        displayProjects.forEach((project, index) => {
          const projectCard = document.createElement('div');
          projectCard.className = 'project-card bg-white rounded-xl overflow-hidden shadow-md card-hover';
          
                  projectCard.innerHTML = `
          <div class="relative project-image-container">
            <img alt="${project.name}" 
                 class="project-image-fit" 
                 src="${project.image}">
          </div>
            <div class="p-6">
              <h3 class="text-xl font-bold mb-2">${project.name}</h3>
              <p class="text-gray-600 mb-4">${project.description}</p>
              <div class="flex flex-wrap gap-2 mb-4">
                ${project.technologies.map(tech => 
                  `<span class="bg-gray-100 text-gray-600 text-xs px-3 py-1 rounded-full">${tech}</span>`
                ).join('')}
              </div>
              <div class="flex justify-end items-center">
                <div class="flex items-center">
                  <i class="fas fa-eye text-gray-400 mr-1"></i>
                  <span class="text-gray-500 text-sm">${Math.floor(Math.random() * 1000) + 100}+</span>
                </div>
              </div>
            </div>
          `;
          
          container.appendChild(projectCard);
        });
        
        console.log(`创建了 ${displayProjects.length} 个项目卡片（首页展示）`);
      }
      
      // 初始化项目展示
      createProjectCards();
    }
    
    // 显示所有项目的模态窗口
    window.showAllProjects = function() {
      console.log('显示所有项目模态窗口...');
      
      // 检查是否已存在模态窗口
      const existingModal = document.getElementById('all-projects-modal');
      if (existingModal) {
        existingModal.remove();
      }
      
      // 创建模态窗口
      const modal = document.createElement('div');
      modal.id = 'all-projects-modal';
      modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
      
      modal.innerHTML = `
        <div class="bg-white rounded-2xl max-w-7xl w-full mx-4 max-h-[90vh] overflow-hidden">
          <!-- 模态窗口头部 -->
          <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6">
            <div class="flex justify-between items-center">
              <h2 class="text-2xl font-bold">所有项目作品</h2>
              <button onclick="closeAllProjectsModal()" class="text-white hover:text-gray-200 transition-colors">
                <i class="fas fa-times text-2xl"></i>
              </button>
            </div>
            <p class="text-blue-100 mt-2">探索我们团队的所有创新项目，每一个作品都凝聚了成员们的智慧与汗水</p>
          </div>
          
          <!-- 模态窗口内容 -->
          <div class="p-6 overflow-y-auto max-h-[calc(90vh-120px)]">
            <div id="all-projects-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
              <!-- 所有项目将在这里动态生成 -->
            </div>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
      
      // 加载所有项目
      console.log('模态窗口创建完成，开始加载项目...');
      setTimeout(() => {
        loadAllProjects();
      }, 100);
      
      // 点击背景关闭模态窗口
      modal.addEventListener('click', function(e) {
        if (e.target === modal) {
          closeAllProjectsModal();
        }
      });
    };
    
    // 加载所有项目到网格中
    function loadAllProjects() {
      console.log('开始加载所有项目到模态窗口...');
      console.log('项目列表:', projects);
      console.log('项目总数:', projects.length);
      
      const container = document.getElementById('all-projects-grid');
      if (!container) {
        console.error('找不到all-projects-grid容器');
        return;
      }
      
      console.log('找到容器:', container);
      container.innerHTML = '';
      
      projects.forEach((project, index) => {
        console.log(`处理项目 ${index + 1}:`, project.name, project.image);
        const projectCard = document.createElement('div');
        projectCard.className = 'project-card bg-white rounded-xl overflow-hidden shadow-md card-hover';
        
        projectCard.innerHTML = `
          <div class="relative project-image-container" style="height: 200px;">
            <img alt="${project.name}" 
                 class="project-image-fit" 
                 src="${project.image}">
          </div>
          <div class="p-6">
            <h3 class="text-xl font-bold mb-2 text-gray-800">${project.name}</h3>
            <p class="text-gray-600 mb-4">${project.description}</p>
            <div class="flex flex-wrap gap-2 mb-4">
              ${project.technologies.map(tech => 
                `<span class="bg-gray-100 text-gray-600 text-xs px-3 py-1 rounded-full">${tech}</span>`
              ).join('')}
            </div>
            <div class="flex justify-end items-center">
              <div class="flex items-center">
                <i class="fas fa-eye text-gray-400 mr-1"></i>
                <span class="text-gray-500 text-sm">${Math.floor(Math.random() * 1000) + 100}+</span>
              </div>
            </div>
          </div>
        `;
        
        container.appendChild(projectCard);
      });
      
      console.log(`加载了所有 ${projects.length} 个项目到网格中`);
    }
    
    // 关闭所有项目模态窗口
    window.closeAllProjectsModal = function() {
      console.log('关闭所有项目模态窗口...');
      
      const modal = document.getElementById('all-projects-modal');
      if (modal) {
        modal.remove();
      }
    };
    
    // 检查项目图片加载状态
    window.checkProjectImages = function() {
      console.log('🔍 检查项目图片加载状态...');
      console.log('项目总数:', projects.length);
      
      projects.forEach((project, index) => {
        const img = new Image();
        img.onload = function() {
          console.log(`✅ 项目 ${index + 1}: ${project.name} - 图片加载成功`);
        };
        img.onerror = function() {
          console.error(`❌ 项目 ${index + 1}: ${project.name} - 图片加载失败: ${project.image}`);
        };
        img.src = project.image;
      });
    };
     </script>
 </body>
</html>
